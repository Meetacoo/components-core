"use strict";(self.webpackChunk_kne_components_components_core=self.webpackChunk_kne_components_components_core||[]).push([[8666],{22396:(e,t,n)=>{n.d(t,{c:()=>r});const r={getItem:e=>{const t=window.localStorage.getItem(e);try{const{dataType:e,value:n}=JSON.parse(t);if("object"===e&&"null"===n)return null;if("undefined"===e)return;return"number"===e?Number(n):"boolean"===e?Boolean(n):n}catch(n){return null}},setItem:(e,t)=>{const n=typeof t;window.localStorage.setItem(e,JSON.stringify({dataType:n,value:t}))}}},17376:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var r=n(46964),s=n(84768),o=n(68086),l=n(83416),a=n.n(l),i=n(90948),c=n.n(i),m=n(82496);const d=[["gender",()=>[{value:"M",description:"\u7537"},{value:"F",description:"\u5973"}]],["marital",()=>[{description:"\u5df2\u5a5a",value:"Y"},{description:"\u672a\u5a5a",value:"N"}]],["confirm",()=>[{description:"\u662f",value:"Y"},{description:"\u5426",value:"N"}]],["political",()=>[{description:"\u4e2d\u5171\u515a\u5458",value:"\u4e2d\u5171\u515a\u5458"},{description:"\u5171\u9752\u56e2\u5458",value:"\u5171\u9752\u56e2\u5458"},{description:"\u7fa4\u4f17",value:"\u7fa4\u4f17"},{description:"\u5176\u4ed6\u515a\u6d3e",value:"\u5176\u4ed6\u515a\u6d3e"}]],["phoneStateEnum",()=>[{value:0,description:"\u7a7a\u53f7"},{value:1,description:"\u5b9e\u53f7"},{value:2,description:"\u505c\u673a"},{value:3,description:"\u5e93\u65e0"},{value:4,description:"\u6c89\u9ed8\u53f7"},{value:5,description:"\u98ce\u9669\u53f7"}]],["degreeEnum",()=>[{description:"\u521d\u4e2d",value:10},{description:"\u4e2d\u4e13",value:20},{description:"\u9ad8\u4e2d",value:30},{description:"\u5927\u4e13",value:40},{description:"\u672c\u79d1",value:50},{description:"\u7855\u58eb\u7814\u7a76\u751f",value:60},{description:"\u535a\u58eb\u7814\u7a76\u751f",value:70},{description:"\u535a\u58eb\u540e",value:75},{description:"\u5b66\u5386\u4e0d\u9650",value:999}]]],u=(0,s.withFetch)((e=>{let{data:t,children:n}=e;return"function"===typeof n?n(t):n||(null===t||void 0===t?void 0:t.description)})),p=a()((e=>new Map(d.concat(Object.keys(Object.assign({},e)).map((t=>[t,e[t]])))))),h=e=>{let{loader:t,...n}=e;const{global:{enumsRef:s}}=(0,o.useGlobalContext)(),l=(0,r.useRef)(null);return(0,m.jsx)(u,{...n,loader:async function(){const e=p(await t(...arguments)),{params:n}=arguments.length<=0?void 0:arguments[0],{moduleName:r,name:o,force:a,locale:i}=n,m=async t=>!0!==a&&l.current===i&&s.current.get(t)||await(async()=>{const n=e.get(t),r=await(async()=>"function"===typeof n?new Map((await n({locale:i})).map((e=>[e.value.toString(),e]))):Array.isArray(n)?new Map(n.map((e=>[e.value.toString(),e]))):"object"===typeof n?new Map(Object.keys(n).map((e=>[e.toString(),n[e]]))):(console.warn("\u679a\u4e3e\u503cloader\u7684\u8bbe\u7f6e\u53ef\u80fd\u4e0d\u6b63\u786e"),new Map))();return s.current.set(t,r),l.current=i,r})();if(Array.isArray(r))return await Promise.all(r.map((e=>m(e).then((e=>Array.from(e.values()))))));const d=await m(r);return c()(o)?Array.from(d.values()):d.get(o.toString())}})},y=e=>{let{moduleName:t,name:n,force:r,children:s,...l}=e;const a=(0,o.usePreset)();return(0,m.jsx)(h,{...l,params:{moduleName:t,locale:null===a||void 0===a?void 0:a.locale,enums:null===a||void 0===a?void 0:a.enums,name:n,force:r},loader:e=>{let{params:t}=e;return t.enums},children:s})};y.defaultProps={force:!1};const g=y},34900:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var r=n(46964),s=n(79272),o=n.n(s);const l={"state-tag":"style_state-tag__Kx27z__6hOBk","state-result-tag":"style_state-result-tag__CssDz__6hOBk","state-skill-tag":"style_state-skill-tag__k0bQE__6hOBk","state-tag-filter-result-wrapper":"style_state-tag-filter-result-wrapper__QYS5z__6hOBk","state-tag-filter-name":"style_state-tag-filter-name__iJaJd__6hOBk","state-tag-filterResult":"style_state-tag-filterResult__KTkot__6hOBk","show-bg":"style_show-bg__OcL+R__6hOBk","tag-text":"style_tag-text__JHCt+__6hOBk","state-tag-wrapper":"style_state-tag-wrapper__A-gTE__6hOBk"};var a=n(96164),i=n(82496);const c={default:"#666666",skill:{color:"#666666",borderColor:"#EEEEEE"},result:"#666666",filterResult:"#5CB8B2",success:"#027A48",progress:"#F09700",danger:"#D14343",info:"#155ACF",other:"#6740C3"},m=e=>{let{showBorder:t,text:n,type:s,showBackground:m,className:d,filterName:u,...p}=e;const h=(0,r.useMemo)((()=>{var e,t;return{color:(null===c||void 0===c||null===(e=c[s])||void 0===e?void 0:e.color)||c[s],borderColor:(null===c||void 0===c||null===(t=c[s])||void 0===t?void 0:t.borderColor)||c[s]}}),[s]);return(0,i.jsxs)(a.Space,{"data-testid":"components-core-state-tag",className:o()(l["state-tag-wrapper"],"filterResult"===s?l["state-tag-filter-result-wrapper"]:""),align:"center",size:4,children:[u?(0,i.jsxs)("span",{className:l["state-tag-filter-name"],children:[u,":"]}):null,(0,i.jsx)(a.Tag,{color:h.color,...p,style:{background:m?h.color+"0F":"none",color:h.color,border:t?"1px solid ".concat(h.borderColor):"none"},className:o()(l["state-tag"],d,"result"===s?l["state-result-tag"]:"","skill"===s?l["state-skill-tag"]:"",l["state-tag-".concat(s)],m?l["show-bg"]:"",t?l["show-border"]:""),children:(0,i.jsx)("span",{className:l["tag-text"],children:n})})]})};m.defaultProps={color:"#666666",type:"default",showBorder:!1,showBackground:!0,text:"",className:""};const d=m},33188:(e,t,n)=>{n.r(t),n.d(t,{TablePage:()=>ke,default:()=>fe});const r={table:"style_table__z7kfz__6hOBk","is-resize":"style_is-resize__ut6RW__6hOBk","is-moving":"style_is-moving__BJ9wR__6hOBk","cell-resize-bar":"style_cell-resize-bar__-mlUF__6hOBk","is-computed":"style_is-computed__B9rIF__6hOBk","options-btn":"style_options-btn__U3uoy__6hOBk",tooltip:"style_tooltip__vJlkv__6hOBk","table-changer-setting":"style_table-changer-setting__HcrwR__6hOBk","width-changer-sign":"style_width-changer-sign__Aflyl__6hOBk","columns-control":"style_columns-control__5-5ZF__6hOBk","columns-control-content":"style_columns-control-content__MoeUI__6hOBk","columns-control-content-title":"style_columns-control-content-title__P5sXV__6hOBk","columns-control-content-scroller":"style_columns-control-content-scroller__CeYRV__6hOBk","columns-control-content-footer":"style_columns-control-content-footer__0bQWm__6hOBk","columns-control-content-input":"style_columns-control-content-input__G6yKq__6hOBk","columns-control-content-list":"style_columns-control-content-list__aXvTs__6hOBk","columns-control-content-item":"style_columns-control-content-item__jbyyE__6hOBk","is-drag":"style_is-drag__U68aw__6hOBk","columns-control-content-item-icon":"style_columns-control-content-item-icon__yJqZf__6hOBk","sortable-drag":"style_sortable-drag__K5hWd__6hOBk","sortable-ghost":"style_sortable-ghost__lKTd2__6hOBk","columns-control-overlay":"style_columns-control-overlay__OxCIz__6hOBk","sort-btn":"style_sort-btn__KvNLr__6hOBk","sort-active-desc":"style_sort-active-desc__TIhMC__6hOBk","sort-icon":"style_sort-icon__dB85I__6hOBk","sort-active-asc":"style_sort-active-asc__RUBup__6hOBk"};var s=n(96164),o=n(46964),l=n(79272),a=n.n(l),i=n(43664),c=n(55860),m=n(94368),d=n(1165),u=n.n(d);const p={"col-item":"columns_col-item__Ym1Ec__6hOBk",tag:"columns_tag__bQZLG__6hOBk",avatar:"columns_avatar__SLPI+__6hOBk",hover:"columns_hover__oAwHg__6hOBk",primary:"columns_primary__6KtaA__6hOBk",loading:"columns_loading__gtBay__6hOBk",options:"columns_options__WvDZD__6hOBk"};var h=n(11044),y=n.n(h),g=n(5520),_=n(64972),f=n(82496);const x=e=>{let{className:t,list:n,width:l}=e;const[i,c]=(0,o.useState)(n.length),d=()=>{const e=p.current.querySelectorAll(".option-item"),t=e.length,n=u.current.clientWidth;let r=0,s=0,l=[].map.call(e,(e=>e.offsetWidth));for(;n>=s+l[r]+8*r&&r<t;)s+=l[r],r+=1;for(;n<s+8*(r-1)+(r<t?40:0)&&r>0;)s-=l[r-1],r-=1;(0,o.startTransition)((()=>{c(r)}))},u=(0,m.c)(d),p=(0,m.c)(d),h=n.slice(i);return(0,f.jsx)("div",{className:a()(t),style:{"--max-width":l+"px"},children:(0,f.jsxs)("div",{ref:u,children:[(0,f.jsx)("div",{style:{width:0,height:0,overflow:"hidden",position:"relative"},children:(0,f.jsx)("div",{style:{position:"absolute"},ref:p,children:(0,f.jsx)(s.Space,{children:n.map(((e,t)=>{let{className:n,...s}=e;return(0,o.createElement)(_.default,{...s,key:t,className:a()("option-item","btn-no-padding",r["options-btn"],n),type:"link"})}))})})}),(0,f.jsxs)(s.Space,{children:[n.slice(0,i).map(((e,t)=>{let{className:n,...s}=e;return(0,o.createElement)(_.default,{...s,key:t,className:a()("btn-no-padding",r["options-btn"],n),type:"link"})})),h.length>0&&(0,f.jsx)(s.Dropdown,{menu:{items:h.map(((e,t)=>{let{children:n,...r}=e;return{...r,key:t,label:n}}))},children:(0,f.jsx)(s.Button,{icon:(0,f.jsx)(g.default,{type:"icon-gengduo2"}),className:"btn-no-padding",type:"link"})})]})]})})};var v=n(34900),j=n(63212),b=n(17376),w=n(84768);const C=e=>{let{children:t,ellipsis:n}=e;return(0,f.jsx)(s.Typography.Text,{ellipsis:n&&Object.assign({},{tooltip:{overlayClassName:r.tooltip,children:t}}),children:t})},k=e=>{let{type:t,item:n,isEmpty:r,emptyRender:s,hover:l,primary:i,children:c,width:m,style:d,onClick:u,colValue:h}=e;const[y,g]=(0,o.useState)(!1);return(0,f.jsx)("div",{style:Object.assign({},d,{"--max-width":m+"px"}),className:a()(p["col-item"],p[t],r?null:{[p.hover]:l,[p.primary]:i,[p.loading]:y}),onClick:e=>{"function"!==typeof u||r||y||(g(!0),Promise.resolve(u({item:n,colItem:h,event:e})).finally((()=>{g(!1)})))},children:r?s({type:t,item:n,hover:l,primary:i,children:c}):c})};k.defaultProps={emptyRender:()=>"-"};const O=k,E=(0,w.createWithFetch)({loading:null})((e=>{let{data:t,children:n}=e;return n(t)})),R=e=>{let{api:t,expand:n,onExpand:r,ellipsis:o,hover:l,primary:a,emptyRender:i,isEmpty:c}=e;return n?(0,f.jsx)(E,{...t,children:e=>(0,f.jsx)(O,{type:"hide-info-expand",item:e,hover:l,primary:a,emptyRender:i,isEmpty:c,children:(0,f.jsx)(C,{ellipsis:o,children:"function"===typeof t.children?t.children(e):e})})}):(0,f.jsx)(O,{type:"hide-info",primary:!0,isEmpty:c,emptyRender:i,children:(0,f.jsx)(s.Button,{className:"btn-no-padding",type:"link",onClick:r,children:"\u67e5\u770b"})})};var S=n(5e4),N=n.n(S);const B={date:{render:(e,t)=>{let{hover:n,primary:r,isEmpty:s,emptyRender:o,...l}=t;return(0,f.jsx)(O,{...l,type:"date",item:e,primary:r,hover:n,emptyRender:o,isEmpty:s||!y()(e).isValid(),children:y()(e).format("YYYY-MM-DD")})},width:160,min:120,max:400},dateShort:{render:(e,t)=>{let{hover:n,primary:r,isEmpty:s,emptyRender:o,...l}=t;return(0,f.jsx)(O,{...l,type:"date-short",item:e,primary:r,hover:n,emptyRender:o,isEmpty:s||!y()(e).isValid(),children:y()(e).format("YYYY-MM")})},width:120,min:100,max:400},dateRange:{render:(e,t)=>{let{hover:n,primary:r,isEmpty:s,emptyRender:o,...l}=t;return(0,f.jsx)(O,{...l,type:"date-range",item:e,primary:r,hover:n,emptyRender:o,isEmpty:s,children:y()(null===e||void 0===e?void 0:e[0]).format("YYYY-MM-DD HH:mm")+"-"+y()(null===e||void 0===e?void 0:e[1]).format("HH:mm")})},width:240,min:120,max:400},datetime:{render:(e,t)=>{let{hover:n,primary:r,emptyRender:s,isEmpty:o,hideSecond:l,...a}=t;return(0,f.jsx)(O,{...a,item:e,primary:r,hover:n,emptyRender:s,isEmpty:o||!y()(e).isValid(),children:y()(e).format(l?"YYYY-MM-DD HH:mm":"YYYY-MM-DD HH:mm:ss")})},width:190,min:190,max:400},serialNumber:{render:(e,t)=>{let{hover:n,primary:r,emptyRender:s,isEmpty:o,...l}=t;return(0,f.jsx)(O,{...l,type:"serial-number",item:e,primary:r,hover:n,emptyRender:s,isEmpty:o,children:e})},width:190,min:100,max:400},serialNumberShort:{render:(e,t)=>{let{hover:n,primary:r,emptyRender:s,isEmpty:o,...l}=t;return(0,f.jsx)(O,{...l,type:"serial-number-short",item:e,primary:r,hover:n,emptyRender:s,isEmpty:o,children:e})},width:120,min:100,max:400},user:{render:(e,t)=>{let{hover:n,primary:r,ellipsis:s,emptyRender:o,isEmpty:l,...a}=t;return(0,f.jsx)(O,{...a,type:"user",item:e,primary:r,hover:n,emptyRender:o,isEmpty:l,children:(0,f.jsx)(C,{ellipsis:s,children:e})})},width:200,min:120,max:400},userName:{render:(e,t)=>{let{hover:n,primary:r,ellipsis:s,emptyRender:o,isEmpty:l,...a}=t;return(0,f.jsx)(O,{...a,type:"user-name",item:e,primary:r,hover:n,emptyRender:o,isEmpty:l,children:(0,f.jsx)(C,{ellipsis:s,children:e})})},width:100,min:100,max:400},contacts:{render:(e,t)=>{let{hover:n,primary:r,ellipsis:s,emptyRender:o,isEmpty:l,...a}=t;return(0,f.jsx)(O,{...a,type:"contacts",item:e,primary:r,hover:n,emptyRender:o,isEmpty:l,children:(0,f.jsx)(C,{ellipsis:s,children:e})})},width:240,min:160,max:400},tag:{render:(e,t)=>{let{emptyRender:n,isEmpty:r,...s}=t;return(0,f.jsx)(O,{...s,type:"tag",item:e,emptyRender:n,isEmpty:r,children:e&&(e.isEnum?(0,f.jsx)(b.default,{name:e.name,moduleName:e.moduleName,force:e.force,children:t=>{let{type:n,description:r}=t;return(0,f.jsx)(v.default,{type:n,...Object.assign({},N()(e,["name","isEnum","moduleName","force"])),text:r})}}):(0,f.jsx)(v.default,{...Object.assign({},e)}))})},width:140,min:100,max:400},avatar:{render:(e,t)=>{let{emptyRender:n,isEmpty:r,...s}=t;return(0,f.jsx)(O,{...s,type:"avatar",item:e,emptyRender:n,isEmpty:r,children:(0,f.jsx)(j.default.Avatar,{...Object.assign({},e),size:32})})},width:80,min:64,max:200},singleRow:{render:(e,t)=>{let{hover:n,primary:r,ellipsis:s,emptyRender:o,isEmpty:l,...a}=t;return(0,f.jsx)(O,{...a,type:"single-row",item:e,hover:n,primary:r,emptyRender:o,isEmpty:l,children:(0,f.jsx)(C,{ellipsis:s,children:e})})},width:70,min:70,max:400},hideInfo:{render:(e,t)=>(0,f.jsx)(R,{api:e,...t}),width:120,min:80,max:400},mainInfo:{render:(e,t)=>{let{ellipsis:n,hover:r=!0,primary:s=!0,emptyRender:o,isEmpty:l,...a}=t;return(0,f.jsx)(O,{...a,type:"main-info",item:e,hover:r,primary:s,emptyRender:o,isEmpty:l,children:(0,f.jsx)(C,{ellipsis:n,children:e})})},width:300,min:160,max:500},description:{render:(e,t)=>{let{hover:n,primary:r,ellipsis:s,emptyRender:o,isEmpty:l,...a}=t;return(0,f.jsx)(O,{...a,type:"description",item:e,hover:n,primary:r,emptyRender:o,isEmpty:l,children:(0,f.jsx)(C,{ellipsis:s,children:e})})},width:400,min:160,max:600},options:{render:(e,t)=>{let{width:n}=t;return(0,f.jsx)(x,{className:a()(p["col-item"],p.options),list:e,width:n})},width:180,min:120,max:400},sensitiveInfo:{render:(e,t)=>{let{hover:n,primary:r,ellipsis:s,emptyRender:o,isEmpty:l,...a}=t;return(0,f.jsx)(O,{...a,type:"sensitiveInfo",item:e,hover:n,primary:r,emptyRender:o,isEmpty:l,children:(0,f.jsx)(C,{ellipsis:s,children:e})})},width:200,min:100,max:400},other:{render:(e,t)=>{let{hover:n,primary:r,ellipsis:s,emptyRender:o,isEmpty:l,...a}=t;return(0,f.jsx)(O,{...a,type:"other",item:e,hover:n,primary:r,emptyRender:o,isEmpty:l,children:(0,f.jsx)(C,{ellipsis:s,children:e})})},width:200,min:120,max:400}},M=B;var P=n(58564),z=n.n(P),T=n(27843),I=n.n(T),F=n(79483),A=n.n(F),D=n(35940),Y=n.n(D),H=n(68086),L=n(48812),K=n.n(L),W=n(87292),q=n(97912),J=n(99140),G=n.n(J),U=n(71804),V=n.n(U);const{Panel:Q}=s.Collapse,X=e=>{let{close:t,onConfirm:n,columns:l,config:i}=e;const[c,m]=(0,o.useState)(i||{}),[d,u]=(0,o.useState)(""),{leftFixedColumns:p,rightFixedColumns:h,visibleColumns:y,hiddenColumns:x}=(0,o.useMemo)((()=>A()(Object.assign({leftFixedColumns:[],rightFixedColumns:[],visibleColumns:[],hiddenColumns:[]},K()(l,(e=>"right"===e.fixed?"rightFixedColumns":!0===e.fixed||"left"===e.fixed?"leftFixedColumns":!0!==z()(c,"".concat(e.name,".visible"))&&e.hidden||!1===z()(c,"".concat(e.name,".visible"))?"hiddenColumns":"visibleColumns"))),((e,t,n)=>{e[n]=t.sort(((e,t)=>z()(c,"".concat(e.name,".rank"),0)-z()(c,"".concat(t.name,".rank"),0)))}),{})),[l,c]),v=e=>(0,f.jsxs)(f.Fragment,{children:[e.titleText||e.title||"\u672a\u547d\u540d\u5217",e.groupHeader&&e.groupHeader.length>0?"(".concat(e.groupHeader.map((e=>{let{title:t}=e;return t})).join("-"),")"):""]});return(0,f.jsxs)("div",{className:r["columns-control-content"],children:[(0,f.jsx)("div",{className:r["columns-control-content-title"],children:(0,f.jsxs)(s.Row,{align:"middle",justify:"space-between",children:[(0,f.jsx)(s.Col,{children:"\u7f16\u8f91\u8868\u683c"}),(0,f.jsx)(s.Col,{children:(0,f.jsx)(s.Tooltip,{title:"\u6062\u590d\u9ed8\u8ba4",children:(0,f.jsx)(_.default,{type:"text",icon:(0,f.jsx)(g.default,{type:"icon-huifumorenshezhi"}),onClick:async()=>{n&&await n({}),t()}})})})]})}),(0,f.jsx)("div",{className:r["columns-control-content-scroller"],children:(0,f.jsxs)(s.Collapse,{defaultActiveKey:["active","un-active"],ghost:!0,bordered:!0,children:[(0,f.jsx)(Q,{header:"\u663e\u793a\u7684\u4fe1\u606f",children:(0,f.jsxs)(s.List,{className:r["columns-control-content-list"],children:[p.map(((e,t)=>(0,f.jsx)(s.List.Item,{className:r["columns-control-content-item"],children:(0,f.jsx)(s.Checkbox,{checked:!0,disabled:!0,children:v(e)})},e.name||"left-".concat(t)))),(0,f.jsx)(q.ReactSortable,{list:y,filter:".ignore-elements",dragClass:r["sortable-drag"],ghostClass:r["sortable-ghost"],forceFallback:!0,setList:e=>{(e=>{const t=V()(c),n=[].concat(e.leftFixedColumns,e.visibleColumns,e.rightFixedColumns);(e.hiddenColumns||[]).forEach((e=>{G()(t,"".concat(e.name,".visible"),!1)})),n.forEach(((e,n)=>{G()(t,"".concat(e.name,".rank"),n+1)})),m(t)})({leftFixedColumns:p,visibleColumns:e,hiddenColumns:x,rightFixedColumns:h})},animation:300,delayOnTouchStart:!0,delay:2,children:y.map(((e,t)=>(0,f.jsxs)(s.List.Item,{className:a()(r["columns-control-content-item"],r["is-drag"]),children:[(0,f.jsx)(g.default,{type:"icon-paixu",className:r["columns-control-content-item-icon"]}),(0,f.jsx)(s.Checkbox,{checked:!0,disabled:e.fixed||p.length+y.length+h.length<=1,onChange:t=>{t.stopPropagation(),t.preventDefault();const n=Object.assign({},c);n[e.name]=Object.assign({},n[e.name],{visible:!1}),m(n)},children:v(e)})]},e.name||"visible-".concat(t))))}),h.map(((e,t)=>(0,f.jsx)(s.List.Item,{className:r["columns-control-content-item"],children:(0,f.jsx)(s.Checkbox,{checked:!0,disabled:!0,children:e.titleText||e.title||"\u672a\u547d\u540d\u5217"})},e.name||"right-".concat(t))))]})},"active"),(0,f.jsx)(Q,{header:(0,f.jsxs)(s.Row,{wrap:!1,justify:"space-between",children:[(0,f.jsx)(s.Col,{children:"\u9690\u85cf\u7684\u4fe1\u606f"}),(0,f.jsx)(s.Col,{onClick:e=>{e.stopPropagation(),e.preventDefault()},children:(0,f.jsx)(W.SearchInput,{prefix:(0,f.jsx)(g.default,{type:"icon-sousuo",size:12}),placeholder:"\u641c\u7d22",onSearch:e=>{u(e)},className:r["columns-control-content-input"],size:"small"})})]}),children:(0,f.jsx)(s.List,{dataSource:x.filter((e=>"string"===typeof(e.titleText||e.title)&&(e.titleText||e.title).indexOf(d)>-1)),renderItem:e=>(0,f.jsx)(s.List.Item,{className:r["columns-control-content-item"],children:(0,f.jsx)(s.Checkbox,{checked:!1,onChange:t=>{t.stopPropagation(),t.preventDefault();const n=Object.assign({},c);n[e.name]=Object.assign({},n[e.name],{visible:!0}),m(n)},children:e.titleText||e.title||"\u672a\u547d\u540d\u5217"})},e.key)})},"un-active")]})}),(0,f.jsxs)(s.Row,{className:r["columns-control-content-footer"],justify:"end",gutter:10,children:[(0,f.jsx)(s.Col,{children:(0,f.jsx)(s.Button,{size:"small",onClick:()=>{m(i||{}),t()},children:"\u53d6\u6d88"})}),(0,f.jsx)(s.Col,{children:(0,f.jsx)(_.default,{type:"primary",size:"small",onClick:async()=>{n&&await n(c),t()},children:"\u786e\u5b9a"})})]})]})};var Z=n(50908),$=n(60436),ee=n.n($),te=n(25704),ne=n.n(te);const re=e=>{let{title:t,columns:n,config:l,setConfig:a}=e;const[i,c]=(0,o.useState)(!1);return(0,f.jsxs)(s.Row,{wrap:!1,children:[(0,f.jsx)(s.Col,{flex:1,children:t}),(0,f.jsx)(s.Col,{children:(0,f.jsx)(s.Popover,{open:i,onOpenChange:c,trigger:"click",placement:"bottomLeft",overlayClassName:r["columns-control-overlay"],content:(0,f.jsx)(X,{columns:n,config:l,close:()=>{c(!1)},onConfirm:e=>{a((t=>A()(e,((e,n,r)=>{e[r]=Object.assign({},t[r],Y()(n,["visible","rank"]))}),{})))}}),children:(0,f.jsx)("span",{className:r["table-changer-setting"],children:(0,f.jsx)(g.default,{type:"icon-shezhi"})})})})]})},se=e=>{let{columns:t,name:n,controllerOpen:s,tableWidth:l}=e;const[i,c]=(0,o.useState)(null),m=(0,o.useRef)(i);m.current=i;const d=(0,o.useRef)(null),p=(0,o.useRef)(null),[h,y]=(0,o.useState)({}),{tableServerApis:_}=(0,H.usePreset)(),x=null===_||void 0===_?void 0:_.getDataApi(n),v=(0,Z.useDebouncedCallback)(((e,t)=>{null===_||void 0===_||_.setDataFunc(e,t)}),500),j=u()((e=>{(0,o.startTransition)((()=>{y((t=>{const r="function"===typeof e?e(t):e;return n&&s&&v(n,r),r}))}))})),{send:b}=(0,w.useFetch)(Object.assign({...Object.assign({},x),auto:!1,cache:"TABLE_CONFIG_".concat(n),isLocal:!0,onRequestSuccess:e=>{y(Object.assign({},e))}})),C=u()((()=>{n&&s&&x&&b({force:!1})}));(0,o.useEffect)((()=>{C()}),[C]);const k=(0,o.useMemo)((()=>t.filter((e=>!(!1===z()(h,"".concat(e.name,".visible"))||!0!==z()(h,"".concat(e.name,".visible"))&&!0===e.hidden))).sort(((e,t)=>{const n=e=>z()(h,"".concat(e.name,".rank"),0)+("left"===e.fixed?-1e4:0)+("right"===e.fixed?1e4:0);return n(e)-n(t)}))),[t,h]),O=(0,o.useMemo)((()=>ne()(k,(e=>{let{type:t}=e;return"options"!==t}))),[k]),E=(0,o.useMemo)((()=>I()(k,(e=>{let{type:t,name:n}=e;return z()(h,"".concat(n,".width"))||M[t].width}))),[k,h]),R=e=>{let{width:t,index:n}=e;return O===n?t+Math.max(l-E-2,0):t},S=u()(((e,t)=>(0,f.jsx)("span",{className:a()(r["cell-resize-bar"]),onMouseDown:n=>{d.current=Object.assign({},e,{index:t}),p.current=n.clientX,c(t)},children:(0,f.jsx)(g.default,{type:"icon-paixu"})}))),N=u()((e=>{if(null===i)return;if(!d.current)return;const{name:t,width:n,min:r,max:s,index:o}=d.current,l=Math.min(Math.max(n+e,r),s);l<R({width:r,index:o})||j((e=>Object.assign({},e,{[t]:Object.assign({},e[t],{width:l})})))})),B=u()(((e,n)=>{const{name:s,width:o,min:l,max:i}=e;let c=e;n===k.length-1&&(c=Object.assign({},e,{className:"has-config-btn",title:(0,f.jsx)(re,{title:null===e||void 0===e?void 0:e.title,columns:t,config:h,setConfig:j})}));const d=()=>({className:a()({[r["is-moving"]]:m.current===n})}),u=Math.min(Math.max(z()(h,"".concat(s,".width"))||o,l),i),p=R({width:u,index:n});return Object.assign({},c,{onHeaderCell:d,onCell:d,width:p,shouldCellUpdate:(t,r)=>null===m.current||m.current===n||"hideInfo"===e.type||!ee()(t[e.name],r[e.name]),title:(0,f.jsxs)(f.Fragment,{children:[c.title,!(p>u&&p>i)&&S(Object.assign({},c,{width:p}),n)]})})}));return(0,o.useEffect)((()=>{const e=()=>{c(null),p.current=null,d.current=null},t=e=>{null!==m.current&&null!==d.current&&(null!==p.current?N(e.clientX-p.current):p.current=e.clientX)};return document.documentElement.addEventListener("mouseup",e,!0),document.documentElement.addEventListener("mousemove",t,!0),()=>{document.documentElement.removeEventListener("mouseup",e,!0),document.documentElement.removeEventListener("mousemove",t,!0)}}),[N]),{visibleColumns:k,currentMoveColumnIndex:i,resizeBarRender:S,columnsConfig:h,totalWidth:E,computedColumnProps:B}};var oe=n(90948),le=n.n(oe),ae=n(83416),ie=n.n(ae);const ce=e=>{let{rowKey:t,renderProps:n}=e;const[r,s]=(0,o.useState)(null),l=(0,o.useRef)(n);l.current=n;const a=u()(((e,n,o)=>{let{columnsConfig:a}=o;const{name:i,type:c,expandType:m,title:d,titleRender:u,fixed:p,emptyOf:h,emptyRender:y,groupHeader:g,sort:_,disableColItem:f,...x}=e,{render:v,width:j,min:b,max:w}=Object.assign({},M[c],"hideInfo"===c&&!le()(r)&&Y()(M[m||"other"],["width","min","max"])),C=ie()(v);return{name:i,title:"function"===typeof u?u(d):d,min:b,max:w,width:j,fixed:p,groupHeader:g,sort:_,type:c,render:n=>{const o="function"===typeof t?t(n):n[t],c=Object.assign({},e,"function"===typeof e.render?e.render({...l.current,name:i,target:n}):{}),m=e=>{const t=(h||(e=>""===e||void 0===e||null===e))(e);return C(e,{...x,name:i,width:z()(a,"".concat(i,".width"))||j,min:b,max:w,isEmpty:t,emptyRender:y,hover:c.hover,colValue:n,renderProps:l.current,primary:c.primary,ellipsis:c.ellipsis,expand:r===o,onExpand:()=>s(o)})},d=c.hasOwnProperty("valueOf")&&"function"===typeof c.valueOf?c.valueOf(n,Object.assign({},l.current,{name:i},f?{targetRender:m}:{})):z()(n,i);return f?d:m(d)}}}));return{expandInfo:r,computedColumnProps:a}},me=e=>(0,o.useMemo)((()=>{const t=e.filter((e=>e.groupHeader&&e.groupHeader.length>0));if(t.length>0){const n=e.slice(0),r=[],s=e=>{const{groupHeader:t}=e;if(!(t&&t.length>0))return;const s=n.indexOf(e),o=(t,n)=>{const[r,...l]=t;let a=n.find((e=>e.name===r.name));a||(a=Object.assign({startIndex:s},r,{children:[]}),n.push(a)),l.length>0?o(l,a.children):a.children.push(e)};o(t,r),n.splice(s,1)};return t.forEach(s),r.forEach(((e,t)=>{n.splice(e.startIndex+t,0,e)})),{columns:n,hasGroupHeader:!0}}return{columns:e,hasGroupHeader:!1}}),[e]);var de=n(75680),ue=n.n(de),pe=n(4696),he=n.n(pe);const ye=e=>new Map((e||[]).map((e=>{let{name:t,sort:n}=e;return[t,n]}))),ge=e=>{const[t,n]=ue()(e,{value:"sort",defaultValue:"defaultSort",onChange:"onSortChange"}),s=(0,o.useMemo)((()=>ye(t)),[t]),l=(0,o.useCallback)((e=>n((t=>{const n=e(ye(t));return Array.from(n).map((e=>{let[t,n]=e;return{name:t,sort:n}}))}))),[n]);return(0,o.useCallback)((e=>{let{single:t,name:n}=e;return(0,f.jsxs)("div",{className:a()(r["sort-btn"],{[r["sort-active-desc"]]:"DESC"===s.get(n),[r["sort-active-asc"]]:"ASC"===s.get(n)}),onClick:()=>{l((e=>{const r=e.get(n),s="DESC"===r?"ASC":"ASC"===r?null:"DESC";if(t)return new Map(s?[[n,s]]:[]);const o=he()(e);return s?o.set(n,s):o.delete(n),o}))},children:[(0,f.jsx)(g.default,{type:"icon-triangle-up",className:r["sort-icon"]}),(0,f.jsx)(g.default,{type:"icon-triangle-down",className:r["sort-icon"]})]})}),[s,l])},_e=e=>{let{columns:t,className:n,getScrollEl:l,sticky:c,stickyOffset:d,pagination:p,columnRenderProps:h,rowKey:y,dataSource:g,controllerOpen:_,name:x,summary:v,scroll:j,onTablePropsReady:b,...w}=e;const[C,k]=(0,o.useState)(0),[O,E]=(0,o.useState)(!0);(0,o.useEffect)((()=>{C&&setTimeout((()=>{E(!1)}),0)}),[C]);(0,o.useRef)(h).current=h;const R=(0,m.c)((e=>{k(e.clientWidth)}),{isDebounce:!0}),{expandInfo:S,computedColumnProps:N}=ce({rowKey:y,renderProps:h}),{columnsConfig:B,visibleColumns:M,computedColumnProps:P,currentMoveColumnIndex:z,totalWidth:T}=se({columns:t,controllerOpen:_,name:x,computedColumnProps:N,tableWidth:C}),I=ge(w),F=(0,o.useMemo)((()=>M.map(((e,t)=>{let n=N(e,t,{rowKey:y,expandInfo:S,columnsConfig:B});return n.sort&&"options"!==e.type&&(n=Object.assign({},n,{title:(0,f.jsxs)(f.Fragment,{children:[n.title,I({name:e.name,single:"object"!==typeof n.sort||n.sort.single})]})})),_&&(n=P(n,t,{tableWidth:C,columnsConfig:B})),n}))),[M,C,B,S,y,_,N,P,I]),{columns:A,hasGroupHeader:D}=me(F),Y=u()(b);return(0,o.useEffect)((()=>{Y&&Y({columns:t,groupColumns:A,dataSource:g,visibleColumns:M})}),[Y,A,g,t,M]),(0,f.jsx)("div",{className:a()(n,r.table,{[r["is-resize"]]:null!==z,[r["is-computed"]]:O,[r["has-group-header"]]:D}),ref:R,style:{"--sticky-offset":d},children:!O&&(0,f.jsx)(i.c,{className:"table-page-scroller",scroller:{getContainer:l},getScrollTarget:e=>e.querySelector(".ant-table-body")||e.querySelector(".ant-table-content"),children:(0,f.jsx)(s.Table,{...w,sticky:!!c&&{getContainer:l},dataSource:g,rowKey:y,columns:A,scroll:Object.assign({},{x:Math.max(C,T)},j),pagination:p,summary:"function"===typeof v?function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return v(Object.assign({},{pageData:e},{columns:A}),...n)}:null})})})};_e.defaultProps={controllerOpen:!0,rowKey:"id",getScrollEl:c.K,columnRenderProps:{},sticky:!1,stickyOffset:"var(--nav-height)",pagination:!1};const fe=_e;var xe=n(54948);const ve=e=>({"en-US":()=>n.e(2960).then(n.bind(n,32960)),"zh-CN":()=>n.e(7472).then(n.bind(n,97472))}[e]());var je=n(74879),be=n(22396);const we=e=>{let{id:t,columns:n,children:r}=e;return t?(0,f.jsx)(xe.default,{id:t,children:e=>{let{options:t}=e;return r({columns:n.filter((e=>!e.name||(!Array.isArray(z()(t,"hiddenColumns"))||-1===t.hiddenColumns.indexOf(e.name))))})}}):r({columns:n})},Ce=(0,w.withFetch)((e=>{let{data:t,refresh:n,reload:s,requestParams:l,fetchProps:i,isComplete:m,setData:d,loadMore:p,send:h,dataFormat:y,className:g,featureId:_,columns:x,getColumns:v,pagination:j,columnRenderProps:b,summary:w,...C}=e;const k=u()(y),O=(0,o.useMemo)((()=>k(t)),[t,k]),E={dataSource:O.list,pagination:!!j.open&&{total:O.total,showTotal:e=>(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(je.FormattedMessage,{id:"Page_Total",moduleName:"Table",defaultMessage:"\u5171"}),(0,f.jsx)("span",{className:r.total_text,children:e}),(0,f.jsx)(je.FormattedMessage,{id:"Page_TotalCount",moduleName:"Table",defaultMessage:"\u6761"})]}),current:z()(l,[j.paramsType,j.currentName],1),pageSize:j.pageSize,onChange:j.onChange?j.onChange:(e,t)=>{e!==z()(l,[j.paramsType,j.currentName],1)?("refresh"===j.requestType?n:s)({[j.paramsType]:{[j.currentName]:e,[j.pageSizeName]:t}}):j.onShowSizeChange&&j.onShowSizeChange(e,t),(0,c.K)().scrollTop=0},size:j.size,showSizeChanger:j.showSizeChanger,showQuickJumper:j.showQuickJumper}};return(0,f.jsx)(je.IntlProvider,{importMessages:ve,moduleName:"Table",children:(0,f.jsx)(we,{id:_,columns:x,children:e=>{let{columns:r}=e;return(0,f.jsx)(fe,{...Object.assign({},C,E),className:a()(g,"loading-container",{"is-loading":!m}),columns:r,columnRenderProps:{...b,requestParams:l,fetchProps:i,data:t},summary:"function"===typeof w?function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return w(Object.assign({},{data:t,fetchProps:i,requestParams:l,refresh:n,reload:s,loadMore:p,send:h,dataFormat:y,pagination:j},...r))}:null})}})})}));Ce.defaultProps={pagination:{},columnRenderProps:{},sticky:!0,dataFormat:e=>({list:e.pageData,total:e.totalCount})};const ke=(0,o.forwardRef)(((e,t)=>{let{pagination:n,...r}=e;n=Object.assign({},{showSizeChanger:!0,showQuickJumper:!0,open:!0,paramsType:"data",requestType:"reload",currentName:"currentPage",pageSizeName:"perPage",pageSize:20},n);const s="".concat((r.name||"common").toUpperCase(),"_TABLE_PAGE_SIZE"),[l,a]=(0,o.useState)(be.c.getItem(s)||n.pageSize),i=(0,o.useMemo)((()=>{const e={};return r.params&&Object.keys(r.params).length>0&&(e.params={...r.params,[n.pageSizeName]:l}),r.data&&Object.keys(r.data).length>0&&(e.data={...r.data,[n.pageSizeName]:l}),e}),[r.params,r.data,n.pageSizeName,l]);return(0,f.jsx)(Ce,{...r,...i,pagination:Object.assign({},n,{pageSize:l,onShowSizeChange:(e,t)=>{be.c.setItem(s,t),a(t)}}),ref:t})}))}}]);
//# sourceMappingURL=8666.72c30452.chunk.js.map