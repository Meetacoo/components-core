(self.webpackChunk_kne_components_components_core=self.webpackChunk_kne_components_components_core||[]).push([[2503,9034],{17342:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var l=n(8762),i=n.n(l);n(46733);const s=i()},45362:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Label:()=>g,default:()=>m});var l=n(73884),i=n(55199),s=n(83136),a=n.n(s);const o="style_content__KHqQn__ujG5g",r="style_size-small__RwAEB__ujG5g",c="style_label__EG-qx__ujG5g",u="style_content-content__AkJj-__ujG5g",d="style_item__WV0-i__ujG5g";var _=n(70579);const g=e=>{let{className:t,children:n,setWidth:i}=e;const s=(0,l.useRef)(null);return(0,l.useRef)(i).current=i,(0,l.useLayoutEffect)((()=>{const e=()=>{if(!s.current)return;const{width:e}=s.current.getBoundingClientRect();i(e)},t=new ResizeObserver(e);return t.observe(s.current),e(),()=>{t.disconnect()}}),[i]),(0,_.jsxs)("div",{ref:s,className:t,children:[n,"\uff1a"]})},h=e=>{let{list:t,labelAlign:n,col:s,gutter:h,className:m,size:v}=e;const j=(0,l.useRef)([]),[x,p]=(0,l.useState)(0);return(0,_.jsx)(i.Row,{"data-testid":"components-core-content",className:a()(o,m,{[r]:"small"===v}),gutter:h,children:t.filter((e=>"function"===typeof e.display?e.display():!1!==e.display)).map(((e,t)=>{let{label:l,content:o,block:r}=e;return(0,_.jsx)(i.Col,{span:!0===r?24:24/s,className:d,children:(0,_.jsxs)(i.Space,{className:d,children:[l?(0,_.jsx)("div",{style:x&&"auto"!==n?{minWidth:x,textAlign:n}:null,children:(0,_.jsx)(g,{className:a()(c,"content-label"),setWidth:e=>{j.current[t]=e,p(Math.max(...j.current))},children:l})}):null,(0,_.jsx)("div",{className:a()(u,"content-content"),children:o})]},t)},t)}))})};h.defaultProps={labelAlign:"left",col:1,gutter:0,list:[]};const m=h},89384:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>w});var l=n(55199),i=n(53984),s=n.n(i),a=n(83136),o=n.n(a),r=n(17342),c=n(76329),u=n(64671),d=n(45362);const _={notification:"style_notification__Vv-MM__ujG5g",list:"style_list__l8KOo__ujG5g",header:"style_header__3dcv8__ujG5g",item:"style_item__d92RS__ujG5g","item-box":"style_item-box__dd-Lk__ujG5g","index-1":"style_index-1__f97L0__ujG5g","index-2":"style_index-2__04vAw__ujG5g","item-box-main":"style_item-box-main__lnSak__ujG5g","item-title":"style_item-title__mArMd__ujG5g","level-high":"style_level-high__Uys7Y__ujG5g","level-middle":"style_level-middle__EewyC__ujG5g","level-low":"style_level-low__8kVyL__ujG5g","title-icon":"style_title-icon__1EoAG__ujG5g","item-subtitle":"style_item-subtitle__xeFJs__ujG5g","close-btn":"style_close-btn__7qpG3__ujG5g","is-loading":"style_is-loading__upVL+__ujG5g","item-content":"style_item-content__8MlsG__ujG5g","link-outer":"style_link-outer__kegyZ__ujG5g",link:"style_link__F2CO-__ujG5g","is-last-item":"style_is-last-item__MytRl__ujG5g"};var g=n(73884),h=n(39835),m=n.n(h),v=n(85855),j=n.n(v),x=n(96604),p=n.n(x),f=n(81014),y=n(32520),b=n.n(y),G=n(70579);const k=["high","middle","low"],N=e=>{let{level:t,title:n,groupLength:i,subtitle:s,content:a,link:r,id:g,children:h,className:m}=e;const{setGlobal:v}=(0,c.useGlobalContext)("notification"),{apis:j,ajax:x}=(0,c.usePreset)(),{isLoading:y,callback:k}=(0,f.useLoading)((async()=>{var e;const{data:t}=null!==j&&void 0!==j&&null!==(e=j.notification)&&void 0!==e&&e.read?await x(Object.assign({},j.notification.read,{data:{ids:[g]}})):{data:{code:0}};0===t.code&&v((e=>{const t=((null===e||void 0===e?void 0:e.list)||[]).slice(0),n=b()(t,(e=>g===e.id));return n>-1&&t.splice(n,1),Object.assign({},e,{list:t})}))}));return(0,G.jsxs)("div",{className:o()(_.item,m),style:{"--group-length":Math.min(i,3)||1},children:[i&&i>1&&p()(1,Math.min(i,3)).reverse().map((e=>(0,G.jsx)("div",{className:o()(_["item-box"],_["index-".concat(e)])},e))),(0,G.jsxs)("div",{className:o()(_["item-box"],_["item-box-main"]),children:[(0,G.jsxs)("div",{className:o()(_["item-title"],_["level-".concat(t)]),children:[(0,G.jsx)(u.default,{className:_["title-icon"],type:"high"===t?"icon-tishi":"icon-daiwochuli"}),(0,G.jsx)(l.Typography.Text,{ellipsis:!0,children:n})]}),(0,G.jsxs)("div",{className:_["item-content"],children:[(0,G.jsxs)("div",{className:_["item-subtitle"],children:[(0,G.jsx)(l.Typography.Text,{ellipsis:!0,children:s||""}),(0,G.jsx)(u.default,{className:o()(_["close-btn"],{[_["is-loading"]]:y}),type:"icon-close-thin",onClick:()=>{y||g&&k()}})]}),Array.isArray(a)?(0,G.jsx)(d.default,{list:a,labelAlign:"auto",size:"small"}):h]}),r&&(0,G.jsx)("div",{className:_["link-outer"],children:(0,G.jsx)(f.default,{className:_.link,size:"small",onClick:async()=>{var e;const{data:t}=null!==j&&void 0!==j&&null!==(e=j.notification)&&void 0!==e&&e.read?await x(Object.assign({},j.notification.read,{data:{ids:[g]}})):{data:{code:0}};0===t.code&&window.open(r)},children:"\u67e5\u770b\u8be6\u60c5"})})]})]})};N.defaultProps={level:"low"};const w=()=>{const{global:e,setGlobal:t}=(0,c.useGlobalContext)("notification"),n=(0,g.useRef)(),{apis:i,ajax:a}=(0,c.usePreset)(),[u,d]=(0,g.useState)(32);(0,g.useEffect)((()=>{var e;n.current&&d(null===(e=n.current)||void 0===e?void 0:e.clientHeight)}),[]);const{list:h,expand:v}=Object.assign({},{expand:!1,list:[]},e),x=(0,g.useMemo)((()=>{const e=m()(h,(e=>e.level||"low"));return k.map((t=>e[t]||[]))}),[h]);return 0===h.length?null:(0,G.jsxs)("div",{className:_.notification,style:{"--head-option-height":"".concat(u,"px")},children:[(0,G.jsx)("div",{ref:n,children:(0,G.jsxs)(l.Row,{justify:"end",wrap:!1,className:_.header,gutter:8,children:[x.some((e=>e.length>1))&&(0,G.jsx)(l.Col,{children:(0,G.jsx)(l.Button,{size:"small",onClick:()=>{t(Object.assign({},e,{expand:!v}))},children:v?"\u5168\u90e8\u6298\u53e0":"\u5168\u90e8\u5c55\u5f00"})}),(0,G.jsx)(l.Col,{children:(0,G.jsx)(f.default,{type:"primary",size:"small",onClick:async()=>{var n;const{data:l}=null!==i&&void 0!==i&&null!==(n=i.notification)&&void 0!==n&&n.read?await a(Object.assign({},i.notification.read,{data:{ids:h.map((e=>e.id)).filter((e=>!!e))}})):{data:{code:0}};0===l.code&&t(Object.assign({},e,{list:[]}))},children:"\u5168\u90e8\u6e05\u9664"})})]})}),(0,G.jsx)(r.A,{className:_.list,children:(0,G.jsx)(s(),{leaveReverse:!0,duration:200,interval:20,children:x.filter((e=>e&&e.length>0)).map(((e,t)=>{var n;if(v)return e.map(((n,l)=>{var i;return n&&(0,G.jsx)("div",{children:(0,G.jsx)(N,{...Object.assign({},n),className:o()({[_["is-last-item"]]:+t+1===Math.min(null===(i=x.filter((e=>e&&e.length)))||void 0===i?void 0:i.length,3)&&l===(null===e||void 0===e?void 0:e.length)-1})})},"group-".concat(t,"-").concat(l))}));const l=j()(e);return(0,G.jsx)("div",{children:(0,G.jsx)(N,{...Object.assign({},l),groupLength:e.length,className:o()({[_["is-last-item"]]:(null===x||void 0===x?void 0:x.length)&&+t+1===Math.min(null===(n=x.filter((e=>e&&e.length)))||void 0===n?void 0:n.length,3)})})},"group-".concat(t,"-0"))}))})})]})}},94710:e=>{e.exports=function(e,t,n,l){for(var i=-1,s=null==e?0:e.length;++i<s;){var a=e[i];t(l,a,n(a),e)}return l}},32952:(e,t,n)=>{var l=n(45652);e.exports=function(e,t,n,i){return l(e,(function(e,l,s){t(i,e,n(e),s)})),i}},45652:(e,t,n)=>{var l=n(94664),i=n(76516)(l);e.exports=i},75816:e=>{e.exports=function(e,t,n,l){for(var i=e.length,s=n+(l?1:-1);l?s--:++s<i;)if(t(e[s],s,e))return s;return-1}},19449:(e,t,n)=>{var l=n(94710),i=n(32952),s=n(9096),a=n(54052);e.exports=function(e,t){return function(n,o){var r=a(n)?l:i,c=t?t():{};return r(n,e,s(o,2),c)}}},76516:(e,t,n)=>{var l=n(6571);e.exports=function(e,t){return function(n,i){if(null==n)return n;if(!l(n))return e(n,i);for(var s=n.length,a=t?s:-1,o=Object(n);(t?a--:++a<s)&&!1!==i(o[a],a,o););return n}}},32520:(e,t,n)=>{var l=n(75816),i=n(9096),s=n(76759),a=Math.max;e.exports=function(e,t,n){var o=null==e?0:e.length;if(!o)return-1;var r=null==n?0:s(n);return r<0&&(r=a(o+r,0)),l(e,i(t,3),r)}},85855:(e,t,n)=>{e.exports=n(96483)},39835:(e,t,n)=>{var l=n(71775),i=n(19449),s=Object.prototype.hasOwnProperty,a=i((function(e,t,n){s.call(e,n)?e[n].push(t):l(e,n,[t])}));e.exports=a},96483:e=>{e.exports=function(e){return e&&e.length?e[0]:void 0}},76759:(e,t,n)=>{var l=n(37303);e.exports=function(e){var t=l(e),n=t%1;return t===t?n?t-n:t:0}},46733:()=>{}}]);
//# sourceMappingURL=2503.041b6279.chunk.js.map