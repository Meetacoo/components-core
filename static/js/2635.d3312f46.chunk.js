(self.webpackChunk_kne_components_core=self.webpackChunk_kne_components_core||[]).push([[2635,8506],{89519:(e,t,l)=>{"use strict";l.d(t,{Z:()=>i});var s=l(26184),n=l.n(s);l(26035);const i=n()},36056:(e,t,l)=>{"use strict";l.r(t),l.d(t,{Label:()=>h,default:()=>j});var s=l(86122),n=l(2508),i=l(7101),a=l.n(i);const o="style_content__KHqQn__lDjs9",r="style_size-small__RwAEB__lDjs9",c="style_label__EG-qx__lDjs9",d="style_content-content__AkJj-__lDjs9",_="style_item__WV0-i__lDjs9";var u=l(80184);const h=e=>{let{className:t,children:l,setWidth:n}=e;const i=(0,s.useRef)(null);return(0,s.useRef)(n).current=n,(0,s.useLayoutEffect)((()=>{const e=()=>{if(!i.current)return;const{width:e}=i.current.getBoundingClientRect();n(e)},t=new ResizeObserver(e);return t.observe(i.current),e(),()=>{t.disconnect()}}),[n]),(0,u.jsxs)("div",{ref:i,className:t,children:[l,"\uff1a"]})},m=e=>{let{list:t,labelAlign:l,col:i,gutter:m,className:j,size:v}=e;const x=(0,s.useRef)([]),[f,p]=(0,s.useState)(0);return(0,u.jsx)(n.Row,{"data-testid":"components-core-content",className:a()(o,j,{[r]:"small"===v}),gutter:m,children:t.filter((e=>"function"===typeof e.display?e.display():!1!==e.display)).map(((e,t)=>{let{label:s,content:o,block:r}=e;return(0,u.jsx)(n.Col,{span:!0===r?24:24/i,className:_,children:(0,u.jsxs)(n.Space,{className:_,children:[s?(0,u.jsx)("div",{style:f&&"auto"!==l?{minWidth:f,textAlign:l}:null,children:(0,u.jsx)(h,{className:a()(c,"content-label"),setWidth:e=>{x.current[t]=e,p(Math.max(...x.current))},children:s})}):null,(0,u.jsx)("div",{className:a()(d,"content-content"),children:o})]},t)},t)}))})};m.defaultProps={labelAlign:"left",col:1,gutter:0,list:[]};const j=m},6029:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>w});var s=l(2508),n=l(93568),i=l.n(n),a=l(7101),o=l.n(a),r=l(89519),c=l(43682),d=l(91243),_=l(36056),u=l(96601),h=l(86122),m=l(98444),j=l.n(m),v=l(26822),x=l.n(v),f=l(66222),p=l.n(f),g=l(92527),y=l(51475),b=l.n(y),D=l(80184);const k=["high","middle","low"],N=e=>{let{level:t,title:l,groupLength:n,subtitle:i,content:a,link:r,id:h,children:m,className:j}=e;const{setGlobal:v}=(0,c.useGlobalContext)("notification"),{apis:x,ajax:f}=(0,c.usePreset)(),{isLoading:y,callback:k}=(0,g.useLoading)((async()=>{var e;const{data:t}=null!==x&&void 0!==x&&null!==(e=x.notification)&&void 0!==e&&e.read?await f(Object.assign({},x.notification.read,{data:{ids:[h]}})):{data:{code:0}};0===t.code&&v((e=>{const t=((null===e||void 0===e?void 0:e.list)||[]).slice(0),l=b()(t,(e=>h===e.id));return l>-1&&t.splice(l,1),Object.assign({},e,{list:t})}))}));return(0,D.jsxs)("div",{className:o()(u.Z.item,j),style:{"--group-length":Math.min(n,3)||1},children:[n&&n>1&&p()(1,Math.min(n,3)).reverse().map((e=>(0,D.jsx)("div",{className:o()(u.Z["item-box"],u.Z["index-".concat(e)])},e))),(0,D.jsxs)("div",{className:o()(u.Z["item-box"],u.Z["item-box-main"]),children:[(0,D.jsxs)("div",{className:o()(u.Z["item-title"],u.Z["level-".concat(t)]),children:[(0,D.jsx)(d.default,{className:u.Z["title-icon"],type:"high"===t?"icon-tishi":"icon-daiwochuli"}),(0,D.jsx)(s.Typography.Text,{ellipsis:!0,children:l})]}),(0,D.jsxs)("div",{className:u.Z["item-content"],children:[(0,D.jsxs)("div",{className:u.Z["item-subtitle"],children:[(0,D.jsx)(s.Typography.Text,{ellipsis:!0,children:i||""}),(0,D.jsx)(d.default,{className:o()(u.Z["close-btn"],{[u.Z["is-loading"]]:y}),type:"icon-close-thin",onClick:()=>{y||h&&k()}})]}),Array.isArray(a)?(0,D.jsx)(_.default,{list:a,labelAlign:"auto",size:"small"}):m]}),r&&(0,D.jsx)("div",{className:u.Z["link-outer"],children:(0,D.jsx)(g.default,{className:u.Z.link,size:"small",onClick:async()=>{var e;const{data:t}=null!==x&&void 0!==x&&null!==(e=x.notification)&&void 0!==e&&e.read?await f(Object.assign({},x.notification.read,{data:{ids:[h]}})):{data:{code:0}};0===t.code&&window.open(r)},children:"\u67e5\u770b\u8be6\u60c5"})})]})]})};N.defaultProps={level:"low"};const w=()=>{const{global:e,setGlobal:t}=(0,c.useGlobalContext)("notification"),l=(0,h.useRef)(),{apis:n,ajax:a}=(0,c.usePreset)(),[d,_]=(0,h.useState)(32);(0,h.useEffect)((()=>{var e;l.current&&_(null===(e=l.current)||void 0===e?void 0:e.clientHeight)}),[]);const{list:m,expand:v}=Object.assign({},{expand:!1,list:[]},e),f=(0,h.useMemo)((()=>{const e=j()(m,(e=>e.level||"low"));return k.map((t=>e[t]||[]))}),[m]);return 0===m.length?null:(0,D.jsxs)("div",{className:u.Z.notification,style:{"--head-option-height":"".concat(d,"px")},children:[(0,D.jsx)("div",{ref:l,children:(0,D.jsxs)(s.Row,{justify:"end",wrap:!1,className:u.Z.header,gutter:8,children:[f.some((e=>e.length>1))&&(0,D.jsx)(s.Col,{children:(0,D.jsx)(s.Button,{size:"small",onClick:()=>{t(Object.assign({},e,{expand:!v}))},children:v?"\u5168\u90e8\u6298\u53e0":"\u5168\u90e8\u5c55\u5f00"})}),(0,D.jsx)(s.Col,{children:(0,D.jsx)(g.default,{type:"primary",size:"small",onClick:async()=>{var l;const{data:s}=null!==n&&void 0!==n&&null!==(l=n.notification)&&void 0!==l&&l.read?await a(Object.assign({},n.notification.read,{data:{ids:m.map((e=>e.id)).filter((e=>!!e))}})):{data:{code:0}};0===s.code&&t(Object.assign({},e,{list:[]}))},children:"\u5168\u90e8\u6e05\u9664"})})]})}),(0,D.jsx)(r.Z,{className:u.Z.list,children:(0,D.jsx)(i(),{leaveReverse:!0,duration:200,interval:20,children:f.filter((e=>e&&e.length>0)).map(((e,t)=>{var l;if(v)return e.map(((e,l)=>e&&(0,D.jsx)("div",{children:(0,D.jsx)(N,{...Object.assign({},e)})},"group-".concat(t,"-").concat(l))));const s=x()(e);return(0,D.jsx)("div",{children:(0,D.jsx)(N,{...Object.assign({},s),groupLength:e.length,className:o()({[u.Z["is-last-item"]]:(null===f||void 0===f?void 0:f.length)&&+t+1===Math.min(null===(l=f.filter((e=>e&&e.length)))||void 0===l?void 0:l.length,3)})})},"group-".concat(t,"-0"))}))})})]})}},31211:e=>{e.exports=function(e,t,l,s){for(var n=-1,i=null==e?0:e.length;++n<i;){var a=e[n];t(s,a,l(a),e)}return s}},38430:(e,t,l)=>{var s=l(87927);e.exports=function(e,t,l,n){return s(e,(function(e,s,i){t(n,e,l(e),i)})),n}},87927:(e,t,l)=>{var s=l(15358),n=l(63173)(s);e.exports=n},2045:e=>{e.exports=function(e,t,l,s){for(var n=e.length,i=l+(s?1:-1);s?i--:++i<n;)if(t(e[i],i,e))return i;return-1}},74629:(e,t,l)=>{var s=l(31211),n=l(38430),i=l(56025),a=l(93629);e.exports=function(e,t){return function(l,o){var r=a(l)?s:n,c=t?t():{};return r(l,e,i(o,2),c)}}},63173:(e,t,l)=>{var s=l(21473);e.exports=function(e,t){return function(l,n){if(null==l)return l;if(!s(l))return e(l,n);for(var i=l.length,a=t?i:-1,o=Object(l);(t?a--:++a<i)&&!1!==n(o[a],a,o););return l}}},51475:(e,t,l)=>{var s=l(2045),n=l(56025),i=l(39753),a=Math.max;e.exports=function(e,t,l){var o=null==e?0:e.length;if(!o)return-1;var r=null==l?0:i(l);return r<0&&(r=a(o+r,0)),s(e,n(t,3),r)}},26822:(e,t,l)=>{e.exports=l(91294)},98444:(e,t,l)=>{var s=l(32526),n=l(74629),i=Object.prototype.hasOwnProperty,a=n((function(e,t,l){i.call(e,l)?e[l].push(t):s(e,l,[t])}));e.exports=a},91294:e=>{e.exports=function(e){return e&&e.length?e[0]:void 0}},39753:(e,t,l)=>{var s=l(91495);e.exports=function(e){var t=s(e),l=t%1;return t===t?l?t-l:t:0}},26035:()=>{},96601:(e,t,l)=>{"use strict";l.d(t,{Z:()=>s});const s={notification:"style_notification__Vv-MM__lDjs9",list:"style_list__l8KOo__lDjs9",header:"style_header__3dcv8__lDjs9",item:"style_item__d92RS__lDjs9","item-box":"style_item-box__dd-Lk__lDjs9","index-1":"style_index-1__f97L0__lDjs9","index-2":"style_index-2__04vAw__lDjs9","item-box-main":"style_item-box-main__lnSak__lDjs9","item-title":"style_item-title__mArMd__lDjs9","level-high":"style_level-high__Uys7Y__lDjs9","level-middle":"style_level-middle__EewyC__lDjs9","level-low":"style_level-low__8kVyL__lDjs9","title-icon":"style_title-icon__1EoAG__lDjs9","item-subtitle":"style_item-subtitle__xeFJs__lDjs9","close-btn":"style_close-btn__7qpG3__lDjs9","is-loading":"style_is-loading__upVL+__lDjs9","item-content":"style_item-content__8MlsG__lDjs9","link-outer":"style_link-outer__kegyZ__lDjs9",link:"style_link__F2CO-__lDjs9","is-last-item":"style_is-last-item__MytRl__lDjs9"}}}]);
//# sourceMappingURL=2635.d3312f46.chunk.js.map