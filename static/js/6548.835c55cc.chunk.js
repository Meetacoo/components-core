(self.webpackChunk_kne_components_components_core=self.webpackChunk_kne_components_components_core||[]).push([[6548,9424],{42116:(e,t,l)=>{"use strict";l.d(t,{c:()=>i});var n=l(56540),s=l.n(n);l(27200);const i=s()},87780:(e,t,l)=>{"use strict";l.r(t),l.d(t,{Label:()=>m,default:()=>v});var n=l(46964),s=l(96164),i=l(79272),a=l.n(i);const c="style_content__KHqQn__VH9lc",o="style_size-small__RwAEB__VH9lc",r="style_label__EG-qx__VH9lc",d="style_content-content__AkJj-__VH9lc",_="style_item__WV0-i__VH9lc";var u=l(82496);const m=e=>{let{className:t,children:l,setWidth:s}=e;const i=(0,n.useRef)(null);return(0,n.useRef)(s).current=s,(0,n.useLayoutEffect)((()=>{const e=()=>{if(!i.current)return;const{width:e}=i.current.getBoundingClientRect();s(e)},t=new ResizeObserver(e);return t.observe(i.current),e(),()=>{t.disconnect()}}),[s]),(0,u.jsxs)("div",{ref:i,className:t,children:[l,"\uff1a"]})},h=e=>{let{list:t,labelAlign:l,col:i,gutter:h,className:v,size:x}=e;const p=(0,n.useRef)([]),[f,g]=(0,n.useState)(0);return(0,u.jsx)(s.Row,{"data-testid":"components-core-content",className:a()(c,v,{[o]:"small"===x}),gutter:h,children:t.filter((e=>"function"===typeof e.display?e.display():!1!==e.display)).map(((e,t)=>{let{label:n,content:c,block:o}=e;return(0,u.jsx)(s.Col,{span:!0===o?24:24/i,className:_,children:(0,u.jsxs)(s.Space,{className:_,children:[n?(0,u.jsx)("div",{style:f&&"auto"!==l?{minWidth:f,textAlign:l}:null,children:(0,u.jsx)(m,{className:a()(r,"content-label"),setWidth:e=>{p.current[t]=e,g(Math.max(...p.current))},children:n})}):null,(0,u.jsx)("div",{className:a()(d,"content-content"),children:c})]},t)},t)}))})};h.defaultProps={labelAlign:"left",col:1,gutter:0,list:[]};const v=h},42140:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>N});var n=l(96164),s=l(41176),i=l.n(s),a=l(79272),c=l.n(a),o=l(42116),r=l(68086),d=l(5520),_=l(87780);const u={notification:"style_notification__Vv-MM__VH9lc",list:"style_list__l8KOo__VH9lc",header:"style_header__3dcv8__VH9lc",item:"style_item__d92RS__VH9lc","item-box":"style_item-box__dd-Lk__VH9lc","index-1":"style_index-1__f97L0__VH9lc","index-2":"style_index-2__04vAw__VH9lc","item-box-main":"style_item-box-main__lnSak__VH9lc","item-title":"style_item-title__mArMd__VH9lc","level-high":"style_level-high__Uys7Y__VH9lc","level-middle":"style_level-middle__EewyC__VH9lc","level-low":"style_level-low__8kVyL__VH9lc","title-icon":"style_title-icon__1EoAG__VH9lc","item-subtitle":"style_item-subtitle__xeFJs__VH9lc","close-btn":"style_close-btn__7qpG3__VH9lc","is-loading":"style_is-loading__upVL+__VH9lc","item-content":"style_item-content__8MlsG__VH9lc","link-outer":"style_link-outer__kegyZ__VH9lc",link:"style_link__F2CO-__VH9lc","is-last-item":"style_is-last-item__MytRl__VH9lc"};var m=l(46964),h=l(48812),v=l.n(h),x=l(85896),p=l.n(x),f=l(53400),g=l.n(f),y=l(64972),j=l(86696),b=l.n(j),V=l(82496);const H=["high","middle","low"],k=e=>{let{level:t,title:l,groupLength:s,subtitle:i,content:a,link:o,id:m,children:h,className:v}=e;const{setGlobal:x}=(0,r.useGlobalContext)("notification"),{apis:p,ajax:f}=(0,r.usePreset)(),{isLoading:j,callback:H}=(0,y.useLoading)((async()=>{var e;const{data:t}=null!==p&&void 0!==p&&null!==(e=p.notification)&&void 0!==e&&e.read?await f(Object.assign({},p.notification.read,{data:{ids:[m]}})):{data:{code:0}};0===t.code&&x((e=>{const t=((null===e||void 0===e?void 0:e.list)||[]).slice(0),l=b()(t,(e=>m===e.id));return l>-1&&t.splice(l,1),Object.assign({},e,{list:t})}))}));return(0,V.jsxs)("div",{className:c()(u.item,v),style:{"--group-length":Math.min(s,3)||1},children:[s&&s>1&&g()(1,Math.min(s,3)).reverse().map((e=>(0,V.jsx)("div",{className:c()(u["item-box"],u["index-".concat(e)])},e))),(0,V.jsxs)("div",{className:c()(u["item-box"],u["item-box-main"]),children:[(0,V.jsxs)("div",{className:c()(u["item-title"],u["level-".concat(t)]),children:[(0,V.jsx)(d.default,{className:u["title-icon"],type:"high"===t?"icon-tishi":"icon-daiwochuli"}),(0,V.jsx)(n.Typography.Text,{ellipsis:!0,children:l})]}),(0,V.jsxs)("div",{className:u["item-content"],children:[(0,V.jsxs)("div",{className:u["item-subtitle"],children:[(0,V.jsx)(n.Typography.Text,{ellipsis:!0,children:i||""}),(0,V.jsx)(d.default,{className:c()(u["close-btn"],{[u["is-loading"]]:j}),type:"icon-close-thin",onClick:()=>{j||m&&H()}})]}),Array.isArray(a)?(0,V.jsx)(_.default,{list:a,labelAlign:"auto",size:"small"}):h]}),o&&(0,V.jsx)("div",{className:u["link-outer"],children:(0,V.jsx)(y.default,{className:u.link,size:"small",onClick:async()=>{var e;const{data:t}=null!==p&&void 0!==p&&null!==(e=p.notification)&&void 0!==e&&e.read?await f(Object.assign({},p.notification.read,{data:{ids:[m]}})):{data:{code:0}};0===t.code&&window.open(o)},children:"\u67e5\u770b\u8be6\u60c5"})})]})]})};k.defaultProps={level:"low"};const N=()=>{const{global:e,setGlobal:t}=(0,r.useGlobalContext)("notification"),l=(0,m.useRef)(),{apis:s,ajax:a}=(0,r.usePreset)(),[d,_]=(0,m.useState)(32);(0,m.useEffect)((()=>{var e;l.current&&_(null===(e=l.current)||void 0===e?void 0:e.clientHeight)}),[]);const{list:h,expand:x}=Object.assign({},{expand:!1,list:[]},e),f=(0,m.useMemo)((()=>{const e=v()(h,(e=>e.level||"low"));return H.map((t=>e[t]||[]))}),[h]);return 0===h.length?null:(0,V.jsxs)("div",{className:u.notification,style:{"--head-option-height":"".concat(d,"px")},children:[(0,V.jsx)("div",{ref:l,children:(0,V.jsxs)(n.Row,{justify:"end",wrap:!1,className:u.header,gutter:8,children:[f.some((e=>e.length>1))&&(0,V.jsx)(n.Col,{children:(0,V.jsx)(n.Button,{size:"small",onClick:()=>{t(Object.assign({},e,{expand:!x}))},children:x?"\u5168\u90e8\u6298\u53e0":"\u5168\u90e8\u5c55\u5f00"})}),(0,V.jsx)(n.Col,{children:(0,V.jsx)(y.default,{type:"primary",size:"small",onClick:async()=>{var l;const{data:n}=null!==s&&void 0!==s&&null!==(l=s.notification)&&void 0!==l&&l.read?await a(Object.assign({},s.notification.read,{data:{ids:h.map((e=>e.id)).filter((e=>!!e))}})):{data:{code:0}};0===n.code&&t(Object.assign({},e,{list:[]}))},children:"\u5168\u90e8\u6e05\u9664"})})]})}),(0,V.jsx)(o.c,{className:u.list,children:(0,V.jsx)(i(),{leaveReverse:!0,duration:200,interval:20,children:f.filter((e=>e&&e.length>0)).map(((e,t)=>{var l;if(x)return e.map(((e,l)=>e&&(0,V.jsx)("div",{children:(0,V.jsx)(k,{...Object.assign({},e)})},"group-".concat(t,"-").concat(l))));const n=p()(e);return(0,V.jsx)("div",{children:(0,V.jsx)(k,{...Object.assign({},n),groupLength:e.length,className:c()({[u["is-last-item"]]:(null===f||void 0===f?void 0:f.length)&&+t+1===Math.min(null===(l=f.filter((e=>e&&e.length)))||void 0===l?void 0:l.length,3)})})},"group-".concat(t,"-0"))}))})})]})}},53872:e=>{e.exports=function(e,t,l,n){for(var s=-1,i=null==e?0:e.length;++s<i;){var a=e[s];t(n,a,l(a),e)}return n}},93912:(e,t,l)=>{var n=l(2168);e.exports=function(e,t,l,s){return n(e,(function(e,n,i){t(s,e,l(e),i)})),s}},2168:(e,t,l)=>{var n=l(82928),s=l(83924)(n);e.exports=s},38624:e=>{e.exports=function(e,t,l,n){for(var s=e.length,i=l+(n?1:-1);n?i--:++i<s;)if(t(e[i],i,e))return i;return-1}},20860:(e,t,l)=>{var n=l(53872),s=l(93912),i=l(15908),a=l(42336);e.exports=function(e,t){return function(l,c){var o=a(l)?n:s,r=t?t():{};return o(l,e,i(c,2),r)}}},83924:(e,t,l)=>{var n=l(71692);e.exports=function(e,t){return function(l,s){if(null==l)return l;if(!n(l))return e(l,s);for(var i=l.length,a=t?i:-1,c=Object(l);(t?a--:++a<i)&&!1!==s(c[a],a,c););return l}}},86696:(e,t,l)=>{var n=l(38624),s=l(15908),i=l(56460),a=Math.max;e.exports=function(e,t,l){var c=null==e?0:e.length;if(!c)return-1;var o=null==l?0:i(l);return o<0&&(o=a(c+o,0)),n(e,s(t,3),o)}},85896:(e,t,l)=>{e.exports=l(54960)},48812:(e,t,l)=>{var n=l(84456),s=l(20860),i=Object.prototype.hasOwnProperty,a=s((function(e,t,l){i.call(e,l)?e[l].push(t):n(e,l,[t])}));e.exports=a},54960:e=>{e.exports=function(e){return e&&e.length?e[0]:void 0}},56460:(e,t,l)=>{var n=l(92676);e.exports=function(e){var t=n(e),l=t%1;return t===t?l?t-l:t:0}},27200:()=>{}}]);
//# sourceMappingURL=6548.835c55cc.chunk.js.map