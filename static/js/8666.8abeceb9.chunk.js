"use strict";(self.webpackChunk_kne_components_components_core=self.webpackChunk_kne_components_components_core||[]).push([[8666],{22396:(e,t,n)=>{n.d(t,{c:()=>r});const r={getItem:e=>{const t=window.localStorage.getItem(e);try{const{dataType:e,value:n}=JSON.parse(t);if("object"===e&&"null"===n)return null;if("undefined"===e)return;return"number"===e?Number(n):"boolean"===e?Boolean(n):n}catch(n){return null}},setItem:(e,t)=>{const n=typeof t;window.localStorage.setItem(e,JSON.stringify({dataType:n,value:t}))}}},17376:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var r=n(46964),s=n(84768),l=n(68086),o=n(83416),a=n.n(o),i=n(90948),c=n.n(i),m=n(82496);const d=[["gender",()=>[{value:"M",description:"\u7537"},{value:"F",description:"\u5973"}]],["marital",()=>[{description:"\u5df2\u5a5a",value:"Y"},{description:"\u672a\u5a5a",value:"N"}]],["confirm",()=>[{description:"\u662f",value:"Y"},{description:"\u5426",value:"N"}]],["political",()=>[{description:"\u4e2d\u5171\u515a\u5458",value:"\u4e2d\u5171\u515a\u5458"},{description:"\u5171\u9752\u56e2\u5458",value:"\u5171\u9752\u56e2\u5458"},{description:"\u7fa4\u4f17",value:"\u7fa4\u4f17"},{description:"\u5176\u4ed6\u515a\u6d3e",value:"\u5176\u4ed6\u515a\u6d3e"}]],["phoneStateEnum",()=>[{value:0,description:"\u7a7a\u53f7"},{value:1,description:"\u5b9e\u53f7"},{value:2,description:"\u505c\u673a"},{value:3,description:"\u5e93\u65e0"},{value:4,description:"\u6c89\u9ed8\u53f7"},{value:5,description:"\u98ce\u9669\u53f7"}]],["degreeEnum",()=>[{description:"\u521d\u4e2d",value:10},{description:"\u4e2d\u4e13",value:20},{description:"\u9ad8\u4e2d",value:30},{description:"\u5927\u4e13",value:40},{description:"\u672c\u79d1",value:50},{description:"\u7855\u58eb\u7814\u7a76\u751f",value:60},{description:"\u535a\u58eb\u7814\u7a76\u751f",value:70},{description:"\u535a\u58eb\u540e",value:75},{description:"\u5b66\u5386\u4e0d\u9650",value:999}]]],u=(0,s.withFetch)((e=>{let{data:t,children:n}=e;return"function"===typeof n?n(t):n||(null===t||void 0===t?void 0:t.description)})),p=a()((e=>new Map(d.concat(Object.keys(Object.assign({},e)).map((t=>[t,e[t]])))))),h=e=>{let{loader:t,...n}=e;const{global:{enumsRef:s}}=(0,l.useGlobalContext)(),o=(0,r.useRef)(null);return(0,m.jsx)(u,{...n,loader:async function(){const e=p(await t(...arguments)),{params:n}=arguments.length<=0?void 0:arguments[0],{moduleName:r,name:l,force:a,locale:i}=n,m=async t=>!0!==a&&o.current===i&&s.current.get(t)||await(async()=>{const n=e.get(t),r=await(async()=>"function"===typeof n?new Map((await n({locale:i})).map((e=>[e.value.toString(),e]))):Array.isArray(n)?new Map(n.map((e=>[e.value.toString(),e]))):"object"===typeof n?new Map(Object.keys(n).map((e=>[e.toString(),n[e]]))):(console.warn("\u679a\u4e3e\u503cloader\u7684\u8bbe\u7f6e\u53ef\u80fd\u4e0d\u6b63\u786e"),new Map))();return s.current.set(t,r),o.current=i,r})();if(Array.isArray(r))return await Promise.all(r.map((e=>m(e).then((e=>Array.from(e.values()))))));const d=await m(r);return c()(l)?Array.from(d.values()):d.get(l.toString())}})},y=e=>{let{moduleName:t,name:n,force:r,children:s,...o}=e;const a=(0,l.usePreset)();return(0,m.jsx)(h,{...o,params:{moduleName:t,locale:null===a||void 0===a?void 0:a.locale,enums:null===a||void 0===a?void 0:a.enums,name:n,force:r},loader:e=>{let{params:t}=e;return t.enums},children:s})};y.defaultProps={force:!1};const g=y},34900:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var r=n(46964),s=n(79272),l=n.n(s);const o={"state-tag":"style_state-tag__Kx27z__VH9lc","state-result-tag":"style_state-result-tag__CssDz__VH9lc","state-skill-tag":"style_state-skill-tag__k0bQE__VH9lc","state-tag-filter-result-wrapper":"style_state-tag-filter-result-wrapper__QYS5z__VH9lc","state-tag-filter-name":"style_state-tag-filter-name__iJaJd__VH9lc","state-tag-filterResult":"style_state-tag-filterResult__KTkot__VH9lc","show-bg":"style_show-bg__OcL+R__VH9lc","tag-text":"style_tag-text__JHCt+__VH9lc","state-tag-wrapper":"style_state-tag-wrapper__A-gTE__VH9lc"};var a=n(96164),i=n(82496);const c={default:"#666666",skill:{color:"#666666",borderColor:"#EEEEEE"},result:"#666666",filterResult:"#5CB8B2",success:"#027A48",progress:"#F09700",danger:"#D14343",info:"#155ACF",other:"#6740C3"},m=e=>{let{showBorder:t,text:n,type:s,showBackground:m,className:d,filterName:u,...p}=e;const h=(0,r.useMemo)((()=>{var e,t;return{color:(null===c||void 0===c||null===(e=c[s])||void 0===e?void 0:e.color)||c[s],borderColor:(null===c||void 0===c||null===(t=c[s])||void 0===t?void 0:t.borderColor)||c[s]}}),[s]);return(0,i.jsxs)(a.Space,{"data-testid":"components-core-state-tag",className:l()(o["state-tag-wrapper"],"filterResult"===s?o["state-tag-filter-result-wrapper"]:""),align:"center",size:4,children:[u?(0,i.jsxs)("span",{className:o["state-tag-filter-name"],children:[u,":"]}):null,(0,i.jsx)(a.Tag,{color:h.color,...p,style:{background:m?h.color+"0F":"none",color:h.color,border:t?"1px solid ".concat(h.borderColor):"none"},className:l()(o["state-tag"],d,"result"===s?o["state-result-tag"]:"","skill"===s?o["state-skill-tag"]:"",o["state-tag-".concat(s)],m?o["show-bg"]:"",t?o["show-border"]:""),children:(0,i.jsx)("span",{className:o["tag-text"],children:n})})]})};m.defaultProps={color:"#666666",type:"default",showBorder:!1,showBackground:!0,text:"",className:""};const d=m},33188:(e,t,n)=>{n.r(t),n.d(t,{TablePage:()=>Ee,default:()=>fe});const r={table:"style_table__z7kfz__VH9lc","is-resize":"style_is-resize__ut6RW__VH9lc","is-moving":"style_is-moving__BJ9wR__VH9lc","cell-resize-bar":"style_cell-resize-bar__-mlUF__VH9lc","is-computed":"style_is-computed__B9rIF__VH9lc","options-btn":"style_options-btn__U3uoy__VH9lc",tooltip:"style_tooltip__vJlkv__VH9lc","table-changer-setting":"style_table-changer-setting__HcrwR__VH9lc","width-changer-sign":"style_width-changer-sign__Aflyl__VH9lc","columns-control":"style_columns-control__5-5ZF__VH9lc","columns-control-content":"style_columns-control-content__MoeUI__VH9lc","columns-control-content-title":"style_columns-control-content-title__P5sXV__VH9lc","columns-control-content-scroller":"style_columns-control-content-scroller__CeYRV__VH9lc","columns-control-content-footer":"style_columns-control-content-footer__0bQWm__VH9lc","columns-control-content-input":"style_columns-control-content-input__G6yKq__VH9lc","columns-control-content-list":"style_columns-control-content-list__aXvTs__VH9lc","columns-control-content-item":"style_columns-control-content-item__jbyyE__VH9lc","is-drag":"style_is-drag__U68aw__VH9lc","columns-control-content-item-icon":"style_columns-control-content-item-icon__yJqZf__VH9lc","sortable-drag":"style_sortable-drag__K5hWd__VH9lc","sortable-ghost":"style_sortable-ghost__lKTd2__VH9lc","columns-control-overlay":"style_columns-control-overlay__OxCIz__VH9lc","sort-btn":"style_sort-btn__KvNLr__VH9lc","sort-active-desc":"style_sort-active-desc__TIhMC__VH9lc","sort-icon":"style_sort-icon__dB85I__VH9lc","sort-active-asc":"style_sort-active-asc__RUBup__VH9lc"};var s=n(96164),l=n(46964),o=n(79272),a=n.n(o),i=n(43664),c=n(55860),m=n(94368),d=n(1165),u=n.n(d);const p={"col-item":"columns_col-item__Ym1Ec__VH9lc",tag:"columns_tag__bQZLG__VH9lc",avatar:"columns_avatar__SLPI+__VH9lc",hover:"columns_hover__oAwHg__VH9lc",primary:"columns_primary__6KtaA__VH9lc",loading:"columns_loading__gtBay__VH9lc",options:"columns_options__WvDZD__VH9lc"};var h=n(11044),y=n.n(h),g=n(5520),_=n(64972),f=n(82496);const x=e=>{let{className:t,list:n,width:o}=e;const[i,c]=(0,l.useState)(n.length),d=()=>{const e=p.current.querySelectorAll(".option-item"),t=e.length,n=u.current.clientWidth;let r=0,s=0,o=[].map.call(e,(e=>e.offsetWidth));for(;n>=s+o[r]+8*r&&r<t;)s+=o[r],r+=1;for(;n<s+8*(r-1)+(r<t?40:0)&&r>0;)s-=o[r-1],r-=1;(0,l.startTransition)((()=>{c(r)}))},u=(0,m.c)(d),p=(0,m.c)(d),h=n.slice(i);return(0,f.jsx)("div",{className:a()(t),style:{"--max-width":o+"px"},children:(0,f.jsxs)("div",{ref:u,children:[(0,f.jsx)("div",{style:{width:0,height:0,overflow:"hidden",position:"relative"},children:(0,f.jsx)("div",{style:{position:"absolute"},ref:p,children:(0,f.jsx)(s.Space,{children:n.map(((e,t)=>{let{className:n,...s}=e;return(0,l.createElement)(_.default,{...s,key:t,className:a()("option-item","btn-no-padding",r["options-btn"],n),type:"link"})}))})})}),(0,f.jsxs)(s.Space,{children:[n.slice(0,i).map(((e,t)=>{let{className:n,...s}=e;return(0,l.createElement)(_.default,{...s,key:t,className:a()("btn-no-padding",r["options-btn"],n),type:"link"})})),h.length>0&&(0,f.jsx)(s.Dropdown,{menu:{items:h.map(((e,t)=>{let{children:n,...r}=e;return{...r,key:t,label:n}}))},children:(0,f.jsx)(s.Button,{icon:(0,f.jsx)(g.default,{type:"icon-gengduo2"}),className:"btn-no-padding",type:"link"})})]})]})})};var v=n(34900),j=n(63212),b=n(17376),w=n(84768);const C=e=>{let{children:t,ellipsis:n}=e;return(0,f.jsx)(s.Typography.Text,{ellipsis:n&&Object.assign({},{tooltip:{overlayClassName:r.tooltip,children:t}}),children:t})},E=e=>{let{type:t,item:n,isEmpty:r,emptyRender:s,hover:o,primary:i,children:c,width:m,style:d,onClick:u,colValue:h}=e;const[y,g]=(0,l.useState)(!1);return(0,f.jsx)("div",{style:Object.assign({},d,{"--max-width":m+"px"}),className:a()(p["col-item"],p[t],r?null:{[p.hover]:o,[p.primary]:i,[p.loading]:y}),onClick:e=>{"function"!==typeof u||r||y||(g(!0),Promise.resolve(u({item:n,colItem:h,event:e})).finally((()=>{g(!1)})))},children:r?s({type:t,item:n,hover:o,primary:i,children:c}):c})};E.defaultProps={emptyRender:()=>"-"};const R=E,S=(0,w.createWithFetch)({loading:null})((e=>{let{data:t,children:n}=e;return n(t)})),N=e=>{let{api:t,expand:n,onExpand:r,ellipsis:l,hover:o,primary:a,emptyRender:i,isEmpty:c}=e;return n?(0,f.jsx)(S,{...t,children:e=>(0,f.jsx)(R,{type:"hide-info-expand",item:e,hover:o,primary:a,emptyRender:i,isEmpty:c,children:(0,f.jsx)(C,{ellipsis:l,children:"function"===typeof t.children?t.children(e):e})})}):(0,f.jsx)(R,{type:"hide-info",primary:!0,isEmpty:c,emptyRender:i,children:(0,f.jsx)(s.Button,{className:"btn-no-padding",type:"link",onClick:r,children:"\u67e5\u770b"})})};var k=n(5e4),H=n.n(k);const O={date:{render:(e,t)=>{let{hover:n,primary:r,isEmpty:s,emptyRender:l,...o}=t;return(0,f.jsx)(R,{...o,type:"date",item:e,primary:r,hover:n,emptyRender:l,isEmpty:s||!y()(e).isValid(),children:y()(e).format("YYYY-MM-DD")})},width:160,min:120,max:400},dateShort:{render:(e,t)=>{let{hover:n,primary:r,isEmpty:s,emptyRender:l,...o}=t;return(0,f.jsx)(R,{...o,type:"date-short",item:e,primary:r,hover:n,emptyRender:l,isEmpty:s||!y()(e).isValid(),children:y()(e).format("YYYY-MM")})},width:120,min:100,max:400},dateRange:{render:(e,t)=>{let{hover:n,primary:r,isEmpty:s,emptyRender:l,...o}=t;return(0,f.jsx)(R,{...o,type:"date-range",item:e,primary:r,hover:n,emptyRender:l,isEmpty:s,children:y()(null===e||void 0===e?void 0:e[0]).format("YYYY-MM-DD HH:mm")+"-"+y()(null===e||void 0===e?void 0:e[1]).format("HH:mm")})},width:240,min:120,max:400},datetime:{render:(e,t)=>{let{hover:n,primary:r,emptyRender:s,isEmpty:l,hideSecond:o,...a}=t;return(0,f.jsx)(R,{...a,item:e,primary:r,hover:n,emptyRender:s,isEmpty:l||!y()(e).isValid(),children:y()(e).format(o?"YYYY-MM-DD HH:mm":"YYYY-MM-DD HH:mm:ss")})},width:190,min:190,max:400},serialNumber:{render:(e,t)=>{let{hover:n,primary:r,emptyRender:s,isEmpty:l,...o}=t;return(0,f.jsx)(R,{...o,type:"serial-number",item:e,primary:r,hover:n,emptyRender:s,isEmpty:l,children:e})},width:190,min:100,max:400},serialNumberShort:{render:(e,t)=>{let{hover:n,primary:r,emptyRender:s,isEmpty:l,...o}=t;return(0,f.jsx)(R,{...o,type:"serial-number-short",item:e,primary:r,hover:n,emptyRender:s,isEmpty:l,children:e})},width:120,min:100,max:400},user:{render:(e,t)=>{let{hover:n,primary:r,ellipsis:s,emptyRender:l,isEmpty:o,...a}=t;return(0,f.jsx)(R,{...a,type:"user",item:e,primary:r,hover:n,emptyRender:l,isEmpty:o,children:(0,f.jsx)(C,{ellipsis:s,children:e})})},width:200,min:120,max:400},userName:{render:(e,t)=>{let{hover:n,primary:r,ellipsis:s,emptyRender:l,isEmpty:o,...a}=t;return(0,f.jsx)(R,{...a,type:"user-name",item:e,primary:r,hover:n,emptyRender:l,isEmpty:o,children:(0,f.jsx)(C,{ellipsis:s,children:e})})},width:100,min:100,max:400},contacts:{render:(e,t)=>{let{hover:n,primary:r,ellipsis:s,emptyRender:l,isEmpty:o,...a}=t;return(0,f.jsx)(R,{...a,type:"contacts",item:e,primary:r,hover:n,emptyRender:l,isEmpty:o,children:(0,f.jsx)(C,{ellipsis:s,children:e})})},width:240,min:160,max:400},tag:{render:(e,t)=>{let{emptyRender:n,isEmpty:r,...s}=t;return(0,f.jsx)(R,{...s,type:"tag",item:e,emptyRender:n,isEmpty:r,children:e&&(e.isEnum?(0,f.jsx)(b.default,{name:e.name,moduleName:e.moduleName,force:e.force,children:t=>{let{type:n,description:r}=t;return(0,f.jsx)(v.default,{type:n,...Object.assign({},H()(e,["name","isEnum","moduleName","force"])),text:r})}}):(0,f.jsx)(v.default,{...Object.assign({},e)}))})},width:140,min:100,max:400},avatar:{render:(e,t)=>{let{emptyRender:n,isEmpty:r,...s}=t;return(0,f.jsx)(R,{...s,type:"avatar",item:e,emptyRender:n,isEmpty:r,children:(0,f.jsx)(j.default.Avatar,{...Object.assign({},e),size:32})})},width:80,min:64,max:200},singleRow:{render:(e,t)=>{let{hover:n,primary:r,ellipsis:s,emptyRender:l,isEmpty:o,...a}=t;return(0,f.jsx)(R,{...a,type:"single-row",item:e,hover:n,primary:r,emptyRender:l,isEmpty:o,children:(0,f.jsx)(C,{ellipsis:s,children:e})})},width:70,min:70,max:400},hideInfo:{render:(e,t)=>(0,f.jsx)(N,{api:e,...t}),width:120,min:80,max:400},mainInfo:{render:(e,t)=>{let{ellipsis:n,hover:r=!0,primary:s=!0,emptyRender:l,isEmpty:o,...a}=t;return(0,f.jsx)(R,{...a,type:"main-info",item:e,hover:r,primary:s,emptyRender:l,isEmpty:o,children:(0,f.jsx)(C,{ellipsis:n,children:e})})},width:300,min:160,max:500},description:{render:(e,t)=>{let{hover:n,primary:r,ellipsis:s,emptyRender:l,isEmpty:o,...a}=t;return(0,f.jsx)(R,{...a,type:"description",item:e,hover:n,primary:r,emptyRender:l,isEmpty:o,children:(0,f.jsx)(C,{ellipsis:s,children:e})})},width:400,min:160,max:600},options:{render:(e,t)=>{let{width:n}=t;return(0,f.jsx)(x,{className:a()(p["col-item"],p.options),list:e,width:n})},width:180,min:120,max:400},sensitiveInfo:{render:(e,t)=>{let{hover:n,primary:r,ellipsis:s,emptyRender:l,isEmpty:o,...a}=t;return(0,f.jsx)(R,{...a,type:"sensitiveInfo",item:e,hover:n,primary:r,emptyRender:l,isEmpty:o,children:(0,f.jsx)(C,{ellipsis:s,children:e})})},width:200,min:100,max:400},other:{render:(e,t)=>{let{hover:n,primary:r,ellipsis:s,emptyRender:l,isEmpty:o,...a}=t;return(0,f.jsx)(R,{...a,type:"other",item:e,hover:n,primary:r,emptyRender:l,isEmpty:o,children:(0,f.jsx)(C,{ellipsis:s,children:e})})},width:200,min:120,max:400}},V=O;var M=n(58564),P=n.n(M),z=n(27843),T=n.n(z),I=n(79483),F=n.n(I),A=n(35940),D=n.n(A),Y=n(68086),L=n(48812),B=n.n(L),K=n(87292),W=n(97912),q=n(99140),J=n.n(q),G=n(71804),U=n.n(G);const{Panel:Q}=s.Collapse,X=e=>{let{close:t,onConfirm:n,columns:o,config:i}=e;const[c,m]=(0,l.useState)(i||{}),[d,u]=(0,l.useState)(""),{leftFixedColumns:p,rightFixedColumns:h,visibleColumns:y,hiddenColumns:x}=(0,l.useMemo)((()=>F()(Object.assign({leftFixedColumns:[],rightFixedColumns:[],visibleColumns:[],hiddenColumns:[]},B()(o,(e=>"right"===e.fixed?"rightFixedColumns":!0===e.fixed||"left"===e.fixed?"leftFixedColumns":!0!==P()(c,"".concat(e.name,".visible"))&&e.hidden||!1===P()(c,"".concat(e.name,".visible"))?"hiddenColumns":"visibleColumns"))),((e,t,n)=>{e[n]=t.sort(((e,t)=>P()(c,"".concat(e.name,".rank"),0)-P()(c,"".concat(t.name,".rank"),0)))}),{})),[o,c]),v=e=>(0,f.jsxs)(f.Fragment,{children:[e.titleText||e.title||"\u672a\u547d\u540d\u5217",e.groupHeader&&e.groupHeader.length>0?"(".concat(e.groupHeader.map((e=>{let{title:t}=e;return t})).join("-"),")"):""]});return(0,f.jsxs)("div",{className:r["columns-control-content"],children:[(0,f.jsx)("div",{className:r["columns-control-content-title"],children:(0,f.jsxs)(s.Row,{align:"middle",justify:"space-between",children:[(0,f.jsx)(s.Col,{children:"\u7f16\u8f91\u8868\u683c"}),(0,f.jsx)(s.Col,{children:(0,f.jsx)(s.Tooltip,{title:"\u6062\u590d\u9ed8\u8ba4",children:(0,f.jsx)(_.default,{type:"text",icon:(0,f.jsx)(g.default,{type:"icon-huifumorenshezhi"}),onClick:async()=>{n&&await n({}),t()}})})})]})}),(0,f.jsx)("div",{className:r["columns-control-content-scroller"],children:(0,f.jsxs)(s.Collapse,{defaultActiveKey:["active","un-active"],ghost:!0,bordered:!0,children:[(0,f.jsx)(Q,{header:"\u663e\u793a\u7684\u4fe1\u606f",children:(0,f.jsxs)(s.List,{className:r["columns-control-content-list"],children:[p.map(((e,t)=>(0,f.jsx)(s.List.Item,{className:r["columns-control-content-item"],children:(0,f.jsx)(s.Checkbox,{checked:!0,disabled:!0,children:v(e)})},e.name||"left-".concat(t)))),(0,f.jsx)(W.ReactSortable,{list:y,filter:".ignore-elements",dragClass:r["sortable-drag"],ghostClass:r["sortable-ghost"],forceFallback:!0,setList:e=>{(e=>{const t=U()(c),n=[].concat(e.leftFixedColumns,e.visibleColumns,e.rightFixedColumns);(e.hiddenColumns||[]).forEach((e=>{J()(t,"".concat(e.name,".visible"),!1)})),n.forEach(((e,n)=>{J()(t,"".concat(e.name,".rank"),n+1)})),m(t)})({leftFixedColumns:p,visibleColumns:e,hiddenColumns:x,rightFixedColumns:h})},animation:300,delayOnTouchStart:!0,delay:2,children:y.map(((e,t)=>(0,f.jsxs)(s.List.Item,{className:a()(r["columns-control-content-item"],r["is-drag"]),children:[(0,f.jsx)(g.default,{type:"icon-paixu",className:r["columns-control-content-item-icon"]}),(0,f.jsx)(s.Checkbox,{checked:!0,disabled:e.fixed||p.length+y.length+h.length<=1,onChange:t=>{t.stopPropagation(),t.preventDefault();const n=Object.assign({},c);n[e.name]=Object.assign({},n[e.name],{visible:!1}),m(n)},children:v(e)})]},e.name||"visible-".concat(t))))}),h.map(((e,t)=>(0,f.jsx)(s.List.Item,{className:r["columns-control-content-item"],children:(0,f.jsx)(s.Checkbox,{checked:!0,disabled:!0,children:e.titleText||e.title||"\u672a\u547d\u540d\u5217"})},e.name||"right-".concat(t))))]})},"active"),(0,f.jsx)(Q,{header:(0,f.jsxs)(s.Row,{wrap:!1,justify:"space-between",children:[(0,f.jsx)(s.Col,{children:"\u9690\u85cf\u7684\u4fe1\u606f"}),(0,f.jsx)(s.Col,{onClick:e=>{e.stopPropagation(),e.preventDefault()},children:(0,f.jsx)(K.SearchInput,{prefix:(0,f.jsx)(g.default,{type:"icon-sousuo",size:12}),placeholder:"\u641c\u7d22",onSearch:e=>{u(e)},className:r["columns-control-content-input"],size:"small"})})]}),children:(0,f.jsx)(s.List,{dataSource:x.filter((e=>"string"===typeof(e.titleText||e.title)&&(e.titleText||e.title).indexOf(d)>-1)),renderItem:e=>(0,f.jsx)(s.List.Item,{className:r["columns-control-content-item"],children:(0,f.jsx)(s.Checkbox,{checked:!1,onChange:t=>{t.stopPropagation(),t.preventDefault();const n=Object.assign({},c);n[e.name]=Object.assign({},n[e.name],{visible:!0}),m(n)},children:e.titleText||e.title||"\u672a\u547d\u540d\u5217"})},e.key)})},"un-active")]})}),(0,f.jsxs)(s.Row,{className:r["columns-control-content-footer"],justify:"end",gutter:10,children:[(0,f.jsx)(s.Col,{children:(0,f.jsx)(s.Button,{size:"small",onClick:()=>{m(i||{}),t()},children:"\u53d6\u6d88"})}),(0,f.jsx)(s.Col,{children:(0,f.jsx)(_.default,{type:"primary",size:"small",onClick:async()=>{n&&await n(c),t()},children:"\u786e\u5b9a"})})]})]})};var Z=n(50908),$=n(60436),ee=n.n($),te=n(25704),ne=n.n(te);const re=e=>{let{title:t,columns:n,config:o,setConfig:a}=e;const[i,c]=(0,l.useState)(!1);return(0,f.jsxs)(s.Row,{wrap:!1,children:[(0,f.jsx)(s.Col,{flex:1,children:t}),(0,f.jsx)(s.Col,{children:(0,f.jsx)(s.Popover,{open:i,onOpenChange:c,trigger:"click",placement:"bottomLeft",overlayClassName:r["columns-control-overlay"],content:(0,f.jsx)(X,{columns:n,config:o,close:()=>{c(!1)},onConfirm:e=>{a((t=>F()(e,((e,n,r)=>{e[r]=Object.assign({},t[r],D()(n,["visible","rank"]))}),{})))}}),children:(0,f.jsx)("span",{className:r["table-changer-setting"],children:(0,f.jsx)(g.default,{type:"icon-shezhi"})})})})]})},se=e=>{let{columns:t,name:n,controllerOpen:s,tableWidth:o}=e;const[i,c]=(0,l.useState)(null),m=(0,l.useRef)(i);m.current=i;const d=(0,l.useRef)(null),p=(0,l.useRef)(null),[h,y]=(0,l.useState)({}),{tableServerApis:_}=(0,Y.usePreset)(),x=null===_||void 0===_?void 0:_.getDataApi(n),v=(0,Z.useDebouncedCallback)(((e,t)=>{null===_||void 0===_||_.setDataFunc(e,t)}),500),j=u()((e=>{(0,l.startTransition)((()=>{y((t=>{const r="function"===typeof e?e(t):e;return n&&s&&v(n,r),r}))}))})),{send:b}=(0,w.useFetch)(Object.assign({...Object.assign({},x),auto:!1,cache:"TABLE_CONFIG_".concat(n),isLocal:!0,onRequestSuccess:e=>{y(Object.assign({},e))}})),C=u()((()=>{n&&s&&x&&b({force:!1})}));(0,l.useEffect)((()=>{C()}),[C]);const E=(0,l.useMemo)((()=>t.filter((e=>!(!1===P()(h,"".concat(e.name,".visible"))||!0!==P()(h,"".concat(e.name,".visible"))&&!0===e.hidden))).sort(((e,t)=>{const n=e=>P()(h,"".concat(e.name,".rank"),0)+("left"===e.fixed?-1e4:0)+("right"===e.fixed?1e4:0);return n(e)-n(t)}))),[t,h]),R=(0,l.useMemo)((()=>ne()(E,(e=>{let{type:t}=e;return"options"!==t}))),[E]),S=(0,l.useMemo)((()=>T()(E,(e=>{let{type:t,name:n}=e;return P()(h,"".concat(n,".width"))||V[t].width}))),[E,h]),N=e=>{let{width:t,index:n}=e;return R===n?t+Math.max(o-S-2,0):t},k=u()(((e,t)=>(0,f.jsx)("span",{className:a()(r["cell-resize-bar"]),onMouseDown:n=>{d.current=Object.assign({},e,{index:t}),p.current=n.clientX,c(t)},children:(0,f.jsx)(g.default,{type:"icon-paixu"})}))),H=u()((e=>{if(null===i)return;if(!d.current)return;const{name:t,width:n,min:r,max:s,index:l}=d.current,o=Math.min(Math.max(n+e,r),s);o<N({width:r,index:l})||j((e=>Object.assign({},e,{[t]:Object.assign({},e[t],{width:o})})))})),O=u()(((e,n)=>{const{name:s,width:l,min:o,max:i}=e;let c=e;n===E.length-1&&(c=Object.assign({},e,{className:"has-config-btn",title:(0,f.jsx)(re,{title:null===e||void 0===e?void 0:e.title,columns:t,config:h,setConfig:j})}));const d=()=>({className:a()({[r["is-moving"]]:m.current===n})}),u=Math.min(Math.max(P()(h,"".concat(s,".width"))||l,o),i),p=N({width:u,index:n});return Object.assign({},c,{onHeaderCell:d,onCell:d,width:p,shouldCellUpdate:(t,r)=>null===m.current||m.current===n||"hideInfo"===e.type||!ee()(t[e.name],r[e.name]),title:(0,f.jsxs)(f.Fragment,{children:[c.title,!(p>u&&p>i)&&k(Object.assign({},c,{width:p}),n)]})})}));return(0,l.useEffect)((()=>{const e=()=>{c(null),p.current=null,d.current=null},t=e=>{null!==m.current&&null!==d.current&&(null!==p.current?H(e.clientX-p.current):p.current=e.clientX)};return document.documentElement.addEventListener("mouseup",e,!0),document.documentElement.addEventListener("mousemove",t,!0),()=>{document.documentElement.removeEventListener("mouseup",e,!0),document.documentElement.removeEventListener("mousemove",t,!0)}}),[H]),{visibleColumns:E,currentMoveColumnIndex:i,resizeBarRender:k,columnsConfig:h,totalWidth:S,computedColumnProps:O}};var le=n(90948),oe=n.n(le),ae=n(83416),ie=n.n(ae);const ce=e=>{let{rowKey:t,renderProps:n}=e;const[r,s]=(0,l.useState)(null),o=(0,l.useRef)(n);o.current=n;const a=u()(((e,n,l)=>{let{columnsConfig:a}=l;const{name:i,type:c,expandType:m,title:d,titleRender:u,fixed:p,emptyOf:h,emptyRender:y,groupHeader:g,sort:_,disableColItem:f,...x}=e,{render:v,width:j,min:b,max:w}=Object.assign({},V[c],"hideInfo"===c&&!oe()(r)&&D()(V[m||"other"],["width","min","max"])),C=ie()(v);return{name:i,title:"function"===typeof u?u(d):d,min:b,max:w,width:j,fixed:p,groupHeader:g,sort:_,type:c,render:n=>{const l="function"===typeof t?t(n):n[t],c=Object.assign({},e,"function"===typeof e.render?e.render({...o.current,name:i,target:n}):{}),m=e=>{const t=(h||(e=>""===e||void 0===e||null===e))(e);return C(e,{...x,name:i,width:P()(a,"".concat(i,".width"))||j,min:b,max:w,isEmpty:t,emptyRender:y,hover:c.hover,colValue:n,renderProps:o.current,primary:c.primary,ellipsis:c.ellipsis,expand:r===l,onExpand:()=>s(l)})},d=c.hasOwnProperty("valueOf")&&"function"===typeof c.valueOf?c.valueOf(n,Object.assign({},o.current,{name:i},f?{targetRender:m}:{})):P()(n,i);return f?d:m(d)}}}));return{expandInfo:r,computedColumnProps:a}},me=e=>(0,l.useMemo)((()=>{const t=e.filter((e=>e.groupHeader&&e.groupHeader.length>0));if(t.length>0){const n=e.slice(0),r=[],s=e=>{const{groupHeader:t}=e;if(!(t&&t.length>0))return;const s=n.indexOf(e),l=(t,n)=>{const[r,...o]=t;let a=n.find((e=>e.name===r.name));a||(a=Object.assign({startIndex:s},r,{children:[]}),n.push(a)),o.length>0?l(o,a.children):a.children.push(e)};l(t,r),n.splice(s,1)};return t.forEach(s),r.forEach(((e,t)=>{n.splice(e.startIndex+t,0,e)})),{columns:n,hasGroupHeader:!0}}return{columns:e,hasGroupHeader:!1}}),[e]);var de=n(75680),ue=n.n(de),pe=n(4696),he=n.n(pe);const ye=e=>new Map((e||[]).map((e=>{let{name:t,sort:n}=e;return[t,n]}))),ge=e=>{const[t,n]=ue()(e,{value:"sort",defaultValue:"defaultSort",onChange:"onSortChange"}),s=(0,l.useMemo)((()=>ye(t)),[t]),o=(0,l.useCallback)((e=>n((t=>{const n=e(ye(t));return Array.from(n).map((e=>{let[t,n]=e;return{name:t,sort:n}}))}))),[n]);return(0,l.useCallback)((e=>{let{single:t,name:n}=e;return(0,f.jsxs)("div",{className:a()(r["sort-btn"],{[r["sort-active-desc"]]:"DESC"===s.get(n),[r["sort-active-asc"]]:"ASC"===s.get(n)}),onClick:()=>{o((e=>{const r=e.get(n),s="DESC"===r?"ASC":"ASC"===r?null:"DESC";if(t)return new Map(s?[[n,s]]:[]);const l=he()(e);return s?l.set(n,s):l.delete(n),l}))},children:[(0,f.jsx)(g.default,{type:"icon-triangle-up",className:r["sort-icon"]}),(0,f.jsx)(g.default,{type:"icon-triangle-down",className:r["sort-icon"]})]})}),[s,o])},_e=e=>{let{columns:t,className:n,getScrollEl:o,sticky:c,stickyOffset:d,pagination:p,columnRenderProps:h,rowKey:y,dataSource:g,controllerOpen:_,name:x,summary:v,scroll:j,onTablePropsReady:b,...w}=e;const[C,E]=(0,l.useState)(0),[R,S]=(0,l.useState)(!0);(0,l.useEffect)((()=>{C&&setTimeout((()=>{S(!1)}),0)}),[C]);(0,l.useRef)(h).current=h;const N=(0,m.c)((e=>{E(e.clientWidth)}),{isDebounce:!0}),{expandInfo:k,computedColumnProps:H}=ce({rowKey:y,renderProps:h}),{columnsConfig:O,visibleColumns:V,computedColumnProps:M,currentMoveColumnIndex:P,totalWidth:z}=se({columns:t,controllerOpen:_,name:x,computedColumnProps:H,tableWidth:C}),T=ge(w),I=(0,l.useMemo)((()=>V.map(((e,t)=>{let n=H(e,t,{rowKey:y,expandInfo:k,columnsConfig:O});return n.sort&&"options"!==e.type&&(n=Object.assign({},n,{title:(0,f.jsxs)(f.Fragment,{children:[n.title,T({name:e.name,single:"object"!==typeof n.sort||n.sort.single})]})})),_&&(n=M(n,t,{tableWidth:C,columnsConfig:O})),n}))),[V,C,O,k,y,_,H,M,T]),{columns:F,hasGroupHeader:A}=me(I),D=u()(b);return(0,l.useEffect)((()=>{D&&D({columns:t,groupColumns:F,dataSource:g,visibleColumns:V})}),[D,F,g,t,V]),(0,f.jsx)("div",{className:a()(n,r.table,{[r["is-resize"]]:null!==P,[r["is-computed"]]:R,[r["has-group-header"]]:A}),ref:N,style:{"--sticky-offset":d},children:!R&&(0,f.jsx)(i.c,{className:"table-page-scroller",scroller:{getContainer:o},getScrollTarget:e=>e.querySelector(".ant-table-body")||e.querySelector(".ant-table-content"),children:(0,f.jsx)(s.Table,{...w,sticky:!!c&&{getContainer:o},dataSource:g,rowKey:y,columns:F,scroll:Object.assign({},{x:Math.max(C,z)},j),pagination:p,summary:"function"===typeof v?function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return v(Object.assign({},{pageData:e},{columns:F}),...n)}:null})})})};_e.defaultProps={controllerOpen:!0,rowKey:"id",getScrollEl:c.K,columnRenderProps:{},sticky:!1,stickyOffset:"var(--nav-height)",pagination:!1};const fe=_e;var xe=n(54948);const ve=e=>({"en-US":()=>n.e(2960).then(n.bind(n,32960)),"zh-CN":()=>n.e(7472).then(n.bind(n,97472))}[e]());var je=n(74879),be=n(22396);const we=e=>{let{id:t,columns:n,children:r}=e;return t?(0,f.jsx)(xe.default,{id:t,children:e=>{let{options:t}=e;return r({columns:n.filter((e=>!e.name||(!Array.isArray(P()(t,"hiddenColumns"))||-1===t.hiddenColumns.indexOf(e.name))))})}}):r({columns:n})},Ce=(0,w.withFetch)((e=>{let{data:t,refresh:n,reload:s,requestParams:o,fetchProps:i,isComplete:m,setData:d,loadMore:p,send:h,dataFormat:y,className:g,featureId:_,columns:x,getColumns:v,pagination:j,columnRenderProps:b,summary:w,...C}=e;const E=u()(y),R=(0,l.useMemo)((()=>E(t)),[t,E]),S={dataSource:R.list,pagination:!!j.open&&{total:R.total,showTotal:e=>(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(je.FormattedMessage,{id:"Page_Total",moduleName:"Table",defaultMessage:"\u5171"}),(0,f.jsx)("span",{className:r.total_text,children:e}),(0,f.jsx)(je.FormattedMessage,{id:"Page_TotalCount",moduleName:"Table",defaultMessage:"\u6761"})]}),current:P()(o,[j.paramsType,j.currentName],1),pageSize:j.pageSize,onChange:j.onChange?j.onChange:(e,t)=>{e!==P()(o,[j.paramsType,j.currentName],1)?("refresh"===j.requestType?n:s)({[j.paramsType]:{[j.currentName]:e,[j.pageSizeName]:t}}):j.onShowSizeChange&&j.onShowSizeChange(e,t),(0,c.K)().scrollTop=0},size:j.size,showSizeChanger:j.showSizeChanger,showQuickJumper:j.showQuickJumper}};return(0,f.jsx)(je.IntlProvider,{importMessages:ve,moduleName:"Table",children:(0,f.jsx)(we,{id:_,columns:x,children:e=>{let{columns:r}=e;return(0,f.jsx)(fe,{...Object.assign({},C,S),className:a()(g,"loading-container",{"is-loading":!m}),columns:r,columnRenderProps:{...b,requestParams:o,fetchProps:i,data:t},summary:"function"===typeof w?function(){for(var e=arguments.length,r=new Array(e),l=0;l<e;l++)r[l]=arguments[l];return w(Object.assign({},{data:t,fetchProps:i,requestParams:o,refresh:n,reload:s,loadMore:p,send:h,dataFormat:y,pagination:j},...r))}:null})}})})}));Ce.defaultProps={pagination:{},columnRenderProps:{},sticky:!0,dataFormat:e=>({list:e.pageData,total:e.totalCount})};const Ee=(0,l.forwardRef)(((e,t)=>{let{pagination:n,...r}=e;n=Object.assign({},{showSizeChanger:!0,showQuickJumper:!0,open:!0,paramsType:"data",requestType:"reload",currentName:"currentPage",pageSizeName:"perPage",pageSize:20},n);const s="".concat((r.name||"common").toUpperCase(),"_TABLE_PAGE_SIZE"),[o,a]=(0,l.useState)(be.c.getItem(s)||n.pageSize),i=(0,l.useMemo)((()=>{const e={};return r.params&&Object.keys(r.params).length>0&&(e.params={...r.params,[n.pageSizeName]:o}),r.data&&Object.keys(r.data).length>0&&(e.data={...r.data,[n.pageSizeName]:o}),e}),[r.params,r.data,n.pageSizeName,o]);return(0,f.jsx)(Ce,{...r,...i,pagination:Object.assign({},n,{pageSize:o,onShowSizeChange:(e,t)=>{be.c.setItem(s,t),a(t)}}),ref:t})}))}}]);
//# sourceMappingURL=8666.8abeceb9.chunk.js.map