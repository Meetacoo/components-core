(self.webpackChunk_kne_components_components_core=self.webpackChunk_kne_components_components_core||[]).push([[8680,6296],{42116:(e,t,n)=>{"use strict";n.d(t,{c:()=>i});var l=n(56540),s=n.n(l);n(27200);const i=s()},87780:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Label:()=>v,default:()=>m});var l=n(46964),s=n(96164),i=n(79272),a=n.n(i);const r="style_content__KHqQn__rgnvX",o="style_size-small__RwAEB__rgnvX",c="style_label__EG-qx__rgnvX",d="style_content-content__AkJj-__rgnvX",_="style_item__WV0-i__rgnvX";var u=n(82496);const v=e=>{let{className:t,children:n,setWidth:s}=e;const i=(0,l.useRef)(null);return(0,l.useRef)(s).current=s,(0,l.useLayoutEffect)((()=>{const e=()=>{if(!i.current)return;const{width:e}=i.current.getBoundingClientRect();s(e)},t=new ResizeObserver(e);return t.observe(i.current),e(),()=>{t.disconnect()}}),[s]),(0,u.jsxs)("div",{ref:i,className:t,children:[n,"\uff1a"]})},g=e=>{let{list:t,labelAlign:n,col:i,gutter:g,className:m,size:h}=e;const x=(0,l.useRef)([]),[p,f]=(0,l.useState)(0);return(0,u.jsx)(s.Row,{"data-testid":"components-core-content",className:a()(r,m,{[o]:"small"===h}),gutter:g,children:t.filter((e=>"function"===typeof e.display?e.display():!1!==e.display)).map(((e,t)=>{let{label:l,content:r,block:o}=e;return(0,u.jsx)(s.Col,{span:!0===o?24:24/i,className:_,children:(0,u.jsxs)(s.Space,{className:_,children:[l?(0,u.jsx)("div",{style:p&&"auto"!==n?{minWidth:p,textAlign:n}:null,children:(0,u.jsx)(v,{className:a()(c,"content-label"),setWidth:e=>{x.current[t]=e,f(Math.max(...x.current))},children:l})}):null,(0,u.jsx)("div",{className:a()(d,"content-content"),children:r})]},t)},t)}))})};g.defaultProps={labelAlign:"left",col:1,gutter:0,list:[]};const m=g},42140:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>w});var l=n(96164),s=n(41176),i=n.n(s),a=n(79272),r=n.n(a),o=n(42116),c=n(68086),d=n(5520),_=n(87780);const u={notification:"style_notification__Vv-MM__rgnvX",list:"style_list__l8KOo__rgnvX",header:"style_header__3dcv8__rgnvX",item:"style_item__d92RS__rgnvX","item-box":"style_item-box__dd-Lk__rgnvX","index-1":"style_index-1__f97L0__rgnvX","index-2":"style_index-2__04vAw__rgnvX","item-box-main":"style_item-box-main__lnSak__rgnvX","item-title":"style_item-title__mArMd__rgnvX","level-high":"style_level-high__Uys7Y__rgnvX","level-middle":"style_level-middle__EewyC__rgnvX","level-low":"style_level-low__8kVyL__rgnvX","title-icon":"style_title-icon__1EoAG__rgnvX","item-subtitle":"style_item-subtitle__xeFJs__rgnvX","close-btn":"style_close-btn__7qpG3__rgnvX","is-loading":"style_is-loading__upVL+__rgnvX","item-content":"style_item-content__8MlsG__rgnvX","link-outer":"style_link-outer__kegyZ__rgnvX",link:"style_link__F2CO-__rgnvX","is-last-item":"style_is-last-item__MytRl__rgnvX"};var v=n(46964),g=n(48812),m=n.n(g),h=n(85896),x=n.n(h),p=n(53400),f=n.n(p),y=n(64972),j=n(86696),b=n.n(j),X=n(82496);const k=["high","middle","low"],N=e=>{let{level:t,title:n,groupLength:s,subtitle:i,content:a,link:o,id:v,children:g,className:m}=e;const{setGlobal:h}=(0,c.useGlobalContext)("notification"),{apis:x,ajax:p}=(0,c.usePreset)(),{isLoading:j,callback:k}=(0,y.useLoading)((async()=>{var e;const{data:t}=null!==x&&void 0!==x&&null!==(e=x.notification)&&void 0!==e&&e.read?await p(Object.assign({},x.notification.read,{data:{ids:[v]}})):{data:{code:0}};0===t.code&&h((e=>{const t=((null===e||void 0===e?void 0:e.list)||[]).slice(0),n=b()(t,(e=>v===e.id));return n>-1&&t.splice(n,1),Object.assign({},e,{list:t})}))}));return(0,X.jsxs)("div",{className:r()(u.item,m),style:{"--group-length":Math.min(s,3)||1},children:[s&&s>1&&f()(1,Math.min(s,3)).reverse().map((e=>(0,X.jsx)("div",{className:r()(u["item-box"],u["index-".concat(e)])},e))),(0,X.jsxs)("div",{className:r()(u["item-box"],u["item-box-main"]),children:[(0,X.jsxs)("div",{className:r()(u["item-title"],u["level-".concat(t)]),children:[(0,X.jsx)(d.default,{className:u["title-icon"],type:"high"===t?"icon-tishi":"icon-daiwochuli"}),(0,X.jsx)(l.Typography.Text,{ellipsis:!0,children:n})]}),(0,X.jsxs)("div",{className:u["item-content"],children:[(0,X.jsxs)("div",{className:u["item-subtitle"],children:[(0,X.jsx)(l.Typography.Text,{ellipsis:!0,children:i||""}),(0,X.jsx)(d.default,{className:r()(u["close-btn"],{[u["is-loading"]]:j}),type:"icon-close-thin",onClick:()=>{j||v&&k()}})]}),Array.isArray(a)?(0,X.jsx)(_.default,{list:a,labelAlign:"auto",size:"small"}):g]}),o&&(0,X.jsx)("div",{className:u["link-outer"],children:(0,X.jsx)(y.default,{className:u.link,size:"small",onClick:async()=>{var e;const{data:t}=null!==x&&void 0!==x&&null!==(e=x.notification)&&void 0!==e&&e.read?await p(Object.assign({},x.notification.read,{data:{ids:[v]}})):{data:{code:0}};0===t.code&&window.open(o)},children:"\u67e5\u770b\u8be6\u60c5"})})]})]})};N.defaultProps={level:"low"};const w=()=>{const{global:e,setGlobal:t}=(0,c.useGlobalContext)("notification"),n=(0,v.useRef)(),{apis:s,ajax:a}=(0,c.usePreset)(),[d,_]=(0,v.useState)(32);(0,v.useEffect)((()=>{var e;n.current&&_(null===(e=n.current)||void 0===e?void 0:e.clientHeight)}),[]);const{list:g,expand:h}=Object.assign({},{expand:!1,list:[]},e),p=(0,v.useMemo)((()=>{const e=m()(g,(e=>e.level||"low"));return k.map((t=>e[t]||[]))}),[g]);return 0===g.length?null:(0,X.jsxs)("div",{className:u.notification,style:{"--head-option-height":"".concat(d,"px")},children:[(0,X.jsx)("div",{ref:n,children:(0,X.jsxs)(l.Row,{justify:"end",wrap:!1,className:u.header,gutter:8,children:[p.some((e=>e.length>1))&&(0,X.jsx)(l.Col,{children:(0,X.jsx)(l.Button,{size:"small",onClick:()=>{t(Object.assign({},e,{expand:!h}))},children:h?"\u5168\u90e8\u6298\u53e0":"\u5168\u90e8\u5c55\u5f00"})}),(0,X.jsx)(l.Col,{children:(0,X.jsx)(y.default,{type:"primary",size:"small",onClick:async()=>{var n;const{data:l}=null!==s&&void 0!==s&&null!==(n=s.notification)&&void 0!==n&&n.read?await a(Object.assign({},s.notification.read,{data:{ids:g.map((e=>e.id)).filter((e=>!!e))}})):{data:{code:0}};0===l.code&&t(Object.assign({},e,{list:[]}))},children:"\u5168\u90e8\u6e05\u9664"})})]})}),(0,X.jsx)(o.c,{className:u.list,children:(0,X.jsx)(i(),{leaveReverse:!0,duration:200,interval:20,children:p.filter((e=>e&&e.length>0)).map(((e,t)=>{var n;if(h)return e.map(((e,n)=>e&&(0,X.jsx)("div",{children:(0,X.jsx)(N,{...Object.assign({},e)})},"group-".concat(t,"-").concat(n))));const l=x()(e);return(0,X.jsx)("div",{children:(0,X.jsx)(N,{...Object.assign({},l),groupLength:e.length,className:r()({[u["is-last-item"]]:(null===p||void 0===p?void 0:p.length)&&+t+1===Math.min(null===(n=p.filter((e=>e&&e.length)))||void 0===n?void 0:n.length,3)})})},"group-".concat(t,"-0"))}))})})]})}},53872:e=>{e.exports=function(e,t,n,l){for(var s=-1,i=null==e?0:e.length;++s<i;){var a=e[s];t(l,a,n(a),e)}return l}},93912:(e,t,n)=>{var l=n(2168);e.exports=function(e,t,n,s){return l(e,(function(e,l,i){t(s,e,n(e),i)})),s}},2168:(e,t,n)=>{var l=n(82928),s=n(83924)(l);e.exports=s},38624:e=>{e.exports=function(e,t,n,l){for(var s=e.length,i=n+(l?1:-1);l?i--:++i<s;)if(t(e[i],i,e))return i;return-1}},20860:(e,t,n)=>{var l=n(53872),s=n(93912),i=n(15908),a=n(42336);e.exports=function(e,t){return function(n,r){var o=a(n)?l:s,c=t?t():{};return o(n,e,i(r,2),c)}}},83924:(e,t,n)=>{var l=n(71692);e.exports=function(e,t){return function(n,s){if(null==n)return n;if(!l(n))return e(n,s);for(var i=n.length,a=t?i:-1,r=Object(n);(t?a--:++a<i)&&!1!==s(r[a],a,r););return n}}},86696:(e,t,n)=>{var l=n(38624),s=n(15908),i=n(56460),a=Math.max;e.exports=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=null==n?0:i(n);return o<0&&(o=a(r+o,0)),l(e,s(t,3),o)}},85896:(e,t,n)=>{e.exports=n(54960)},48812:(e,t,n)=>{var l=n(84456),s=n(20860),i=Object.prototype.hasOwnProperty,a=s((function(e,t,n){i.call(e,n)?e[n].push(t):l(e,n,[t])}));e.exports=a},54960:e=>{e.exports=function(e){return e&&e.length?e[0]:void 0}},56460:(e,t,n)=>{var l=n(92676);e.exports=function(e){var t=l(e),n=t%1;return t===t?n?t-n:t:0}},27200:()=>{}}]);
//# sourceMappingURL=8680.a811e62f.chunk.js.map