{"version":3,"file":"static/js/3962.3e44db16.chunk.js","mappings":"wnBAEO,MAAMA,EAAS,CACpBC,aAAc,KACdC,YAAcC,GAAsBC,GAAUC,IAAAA,cAACF,EAAqBC,IAGzDE,EAAUC,GACdC,OAAOC,OAAOT,EAAQO,G,sFCFzBG,EAAYP,GACTQ,IAA8D,IAA7D,SAAEC,EAAQ,UAAEC,EAAS,OAAEC,EAAM,QAAEC,EAAO,KAAEC,GAAgBL,EAAPP,EAAKa,EAAAN,EAAAO,GAC5D,MAAOC,EAASC,IAAcC,EAAAA,EAAAA,WAAS,IACvCC,EAAAA,EAAAA,qBAAoBR,GAAQ,KACnB,CACLS,MAAOA,IAAMH,GAAW,GAAQA,aAAYD,aAE7C,CAACA,EAASC,IAEb,MAAMI,EAAQC,IAAeV,GAO7B,OALAW,EAAAA,EAAAA,YAAU,KACRF,IACAJ,GAAW,EAAK,GACf,CAACI,IAEInB,IAAAA,cAACF,EAAgBwB,EAAA,GACnBvB,EAAK,CACTwB,KAAMT,EACNI,MAAOA,IAAMH,GAAW,GACxBJ,KAAMa,UACJ,IAAKb,EAEH,YADAI,GAAW,IAID,UADMJ,KAEhBI,GAAW,EACb,EAEFR,SAAU,WACRQ,GAAW,GACXR,GAAYA,KAASkB,U,EAEvBC,WAAYlB,IACZ,EAIAmB,EAAkB7B,IACtB,MAAM8B,GAAMC,EAAAA,EAAAA,WAAU,MACtB,OAAQC,IACN,MAAMC,EAAOpC,EAAOC,cAAgBD,EAAOC,gBAAkBoC,SAASD,KAChEE,EAAOD,SAASE,cAAc,OACYC,EAAAhC,OAAOC,OAAO,CAAC,EAAG0B,IAA5D,YAAEjC,EAAW,aAAED,GAAwBuC,EAAPpC,EAAKa,EAAAuB,EAAAC,GAC3CL,EAAKM,YAAYJ,GACjB,MAAMK,EAAUC,EAAAA,WAAoBN,GAC9BO,EAAU,IAAIC,SAASC,IAC3B,MAAMC,EAAgBC,IAAQvC,EAAWV,EAAOE,YAA1B+C,CAA8D,oBAAhB/C,EAA6BA,EAAYC,GAAoBA,GACjIwC,EAAQO,OAAO7C,IAAAA,cAAC2C,EAAarB,EAAA,CAC3Bb,OAAQmB,GACJ7B,EAAK,CACTH,aAAcA,GAAgB,KAAOqC,GACrCzB,UAAWA,KACTyB,EAAKa,MAAMC,QAAU,IACrBhB,EAAKiB,YAAYf,GACjBgB,YAAW,KACTX,EAAQY,SAAS,GAChB,EAAE,EAEPxC,QAASA,KACPgC,EAAQ,CACNxB,MAAOU,EAAIuB,QAAQjC,OACnB,KAEH,IAGCA,EAAQA,IACLsB,EAAQY,MAAKC,IAAe,IAAd,MAAEnC,GAAOmC,EAC5BnC,GAAO,IAGX,MAAO,CACLA,QAAOiC,QAAS,CAAEjC,SACnB,CACF,C,kBChFH,IAAIoC,EAAIC,EAAQ,OAEdC,EAAQC,WAAaH,EAAEG,WACvBD,EAAQE,YAAcJ,EAAEI,W","sources":["../node_modules/@kne/with-layer/src/preset.js","../node_modules/@kne/with-layer/src/index.js","../node_modules/react-dom/client.js"],"sourcesContent":["import React from \"react\";\r\n\r\nexport const global = {\r\n  getContainer: null,\r\n  withInstall: (WrappedComponent) => (props) => <WrappedComponent {...props} />\r\n};\r\n\r\nexport const preset = (options) => {\r\n  return Object.assign(global, options);\r\n};\r\n\r\nexport default preset;\r\n","import ReactDOM from \"react-dom/client\";\r\nimport compose from \"@kne/compose\";\r\nimport React, { createRef, useState, useImperativeHandle, useEffect } from \"react\";\r\nimport useRefCallback from \"@kne/use-ref-callback\";\r\nimport { global } from \"./preset\";\r\n\r\nconst withLayer = WrappedComponent => {\r\n  return ({ onCancel, onDestroy, outRef, onMount, onOk, ...props }) => {\r\n    const [visible, setVisible] = useState(false);\r\n    useImperativeHandle(outRef, () => {\r\n      return {\r\n        close: () => setVisible(false), setVisible, visible\r\n      };\r\n    }, [visible, setVisible]);\r\n\r\n    const mount = useRefCallback(onMount);\r\n\r\n    useEffect(() => {\r\n      mount();\r\n      setVisible(true);\r\n    }, [mount]);\r\n\r\n    return (<WrappedComponent\r\n      {...props}\r\n      open={visible}\r\n      close={() => setVisible(false)}\r\n      onOk={async () => {\r\n        if (!onOk) {\r\n          setVisible(false);\r\n          return;\r\n        }\r\n        const res = await onOk();\r\n        if (res !== false) {\r\n          setVisible(false);\r\n        }\r\n      }}\r\n      onCancel={(...args) => {\r\n        setVisible(false);\r\n        onCancel && onCancel(...args);\r\n      }}\r\n      afterClose={onDestroy}\r\n    />);\r\n  };\r\n};\r\n\r\nconst createWithLayer = WrappedComponent => {\r\n  const ref = createRef(null);\r\n  return (args) => {\r\n    const body = global.getContainer && global.getContainer() || document.body;\r\n    const root = document.createElement(\"div\");\r\n    const { withInstall, getContainer, ...props } = Object.assign({}, args);\r\n    body.appendChild(root);\r\n    const rootDom = ReactDOM.createRoot(root);\r\n    const promise = new Promise((resolve) => {\r\n      const LayerInstance = compose(withLayer, global.withInstall)(typeof withInstall === \"function\" ? withInstall(WrappedComponent) : WrappedComponent);\r\n      rootDom.render(<LayerInstance\r\n        outRef={ref}\r\n        {...props}\r\n        getContainer={getContainer || (() => root)}\r\n        onDestroy={() => {\r\n          root.style.opacity = \"0\";\r\n          body.removeChild(root);\r\n          setTimeout(() => {\r\n            rootDom.unmount();\r\n          }, 0);\r\n        }}\r\n        onMount={() => {\r\n          resolve({\r\n            close: ref.current.close\r\n          });\r\n        }}\r\n      />);\r\n    });\r\n\r\n    const close = () => {\r\n      return promise.then(({ close }) => {\r\n        close();\r\n      });\r\n    };\r\n    return {\r\n      close, current: { close }\r\n    };\r\n  };\r\n};\r\n\r\nexport default createWithLayer;\r\nexport { preset } from \"./preset\";\r\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n"],"names":["global","getContainer","withInstall","WrappedComponent","props","React","preset","options","Object","assign","withLayer","_ref","onCancel","onDestroy","outRef","onMount","onOk","_objectWithoutPropertiesLoose","_excluded","visible","setVisible","useState","useImperativeHandle","close","mount","useRefCallback","useEffect","_extends","open","async","arguments","afterClose","createWithLayer","ref","createRef","args","body","document","root","createElement","_Object$assign","_excluded2","appendChild","rootDom","ReactDOM","promise","Promise","resolve","LayerInstance","compose","render","style","opacity","removeChild","setTimeout","unmount","current","then","_ref2","m","require","exports","createRoot","hydrateRoot"],"sourceRoot":""}