(self.webpackChunk_kne_components_components_core=self.webpackChunk_kne_components_components_core||[]).push([[2503,9034],{17342:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var l=n(8762),i=n.n(l);n(46733);const s=i()},45362:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Label:()=>h,default:()=>v});var l=n(73884),i=n(55199),s=n(83136),o=n.n(s);const a="style_content__KHqQn__otc6t",c="style_size-small__RwAEB__otc6t",r="style_label__EG-qx__otc6t",d="style_content-content__AkJj-__otc6t",_="style_item__WV0-i__otc6t";var u=n(70579);const h=t=>{let{className:e,children:n,setWidth:i}=t;const s=(0,l.useRef)(null);return(0,l.useRef)(i).current=i,(0,l.useLayoutEffect)((()=>{const t=()=>{if(!s.current)return;const{width:t}=s.current.getBoundingClientRect();i(t)},e=new ResizeObserver(t);return e.observe(s.current),t(),()=>{e.disconnect()}}),[i]),(0,u.jsxs)("div",{ref:s,className:e,children:[n,"\uff1a"]})},m=t=>{let{list:e,labelAlign:n,col:s,gutter:m,className:v,size:x}=t;const p=(0,l.useRef)([]),[f,g]=(0,l.useState)(0);return(0,u.jsx)(i.Row,{"data-testid":"components-core-content",className:o()(a,v,{[c]:"small"===x}),gutter:m,children:e.filter((t=>"function"===typeof t.display?t.display():!1!==t.display)).map(((t,e)=>{let{label:l,content:a,block:c}=t;return(0,u.jsx)(i.Col,{span:!0===c?24:24/s,className:_,children:(0,u.jsxs)(i.Space,{className:_,children:[l?(0,u.jsx)("div",{style:f&&"auto"!==n?{minWidth:f,textAlign:n}:null,children:(0,u.jsx)(h,{className:o()(r,"content-label"),setWidth:t=>{p.current[e]=t,g(Math.max(...p.current))},children:l})}):null,(0,u.jsx)("div",{className:o()(d,"content-content"),children:a})]},e)},e)}))})};m.defaultProps={labelAlign:"left",col:1,gutter:0,list:[]};const v=m},89384:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>O});var l=n(55199),i=n(53984),s=n.n(i),o=n(83136),a=n.n(o),c=n(17342),r=n(76329),d=n(64671),_=n(45362);const u={notification:"style_notification__Vv-MM__otc6t",list:"style_list__l8KOo__otc6t",header:"style_header__3dcv8__otc6t",item:"style_item__d92RS__otc6t","item-box":"style_item-box__dd-Lk__otc6t","index-1":"style_index-1__f97L0__otc6t","index-2":"style_index-2__04vAw__otc6t","item-box-main":"style_item-box-main__lnSak__otc6t","item-title":"style_item-title__mArMd__otc6t","level-high":"style_level-high__Uys7Y__otc6t","level-middle":"style_level-middle__EewyC__otc6t","level-low":"style_level-low__8kVyL__otc6t","title-icon":"style_title-icon__1EoAG__otc6t","item-subtitle":"style_item-subtitle__xeFJs__otc6t","close-btn":"style_close-btn__7qpG3__otc6t","is-loading":"style_is-loading__upVL+__otc6t","item-content":"style_item-content__8MlsG__otc6t","link-outer":"style_link-outer__kegyZ__otc6t",link:"style_link__F2CO-__otc6t","is-last-item":"style_is-last-item__MytRl__otc6t"};var h=n(73884),m=n(39835),v=n.n(m),x=n(85855),p=n.n(x),f=n(96604),g=n.n(f),y=n(81014),j=n(32520),b=n.n(j),k=n(70579);const N=["high","middle","low"],w=t=>{let{level:e,title:n,groupLength:i,subtitle:s,content:o,link:c,id:h,children:m,className:v}=t;const{setGlobal:x}=(0,r.useGlobalContext)("notification"),{apis:p,ajax:f}=(0,r.usePreset)(),{isLoading:j,callback:N}=(0,y.useLoading)((async()=>{var t;const{data:e}=null!==p&&void 0!==p&&null!==(t=p.notification)&&void 0!==t&&t.read?await f(Object.assign({},p.notification.read,{data:{ids:[h]}})):{data:{code:0}};0===e.code&&x((t=>{const e=((null===t||void 0===t?void 0:t.list)||[]).slice(0),n=b()(e,(t=>h===t.id));return n>-1&&e.splice(n,1),Object.assign({},t,{list:e})}))}));return(0,k.jsxs)("div",{className:a()(u.item,v),style:{"--group-length":Math.min(i,3)||1},children:[i&&i>1&&g()(1,Math.min(i,3)).reverse().map((t=>(0,k.jsx)("div",{className:a()(u["item-box"],u["index-".concat(t)])},t))),(0,k.jsxs)("div",{className:a()(u["item-box"],u["item-box-main"]),children:[(0,k.jsxs)("div",{className:a()(u["item-title"],u["level-".concat(e)]),children:[(0,k.jsx)(d.default,{className:u["title-icon"],type:"high"===e?"icon-tishi":"icon-daiwochuli"}),(0,k.jsx)(l.Typography.Text,{ellipsis:!0,children:n})]}),(0,k.jsxs)("div",{className:u["item-content"],children:[(0,k.jsxs)("div",{className:u["item-subtitle"],children:[(0,k.jsx)(l.Typography.Text,{ellipsis:!0,children:s||""}),(0,k.jsx)(d.default,{className:a()(u["close-btn"],{[u["is-loading"]]:j}),type:"icon-close-thin",onClick:()=>{j||h&&N()}})]}),Array.isArray(o)?(0,k.jsx)(_.default,{list:o,labelAlign:"auto",size:"small"}):m]}),c&&(0,k.jsx)("div",{className:u["link-outer"],children:(0,k.jsx)(y.default,{className:u.link,size:"small",onClick:async()=>{var t;const{data:e}=null!==p&&void 0!==p&&null!==(t=p.notification)&&void 0!==t&&t.read?await f(Object.assign({},p.notification.read,{data:{ids:[h]}})):{data:{code:0}};0===e.code&&window.open(c)},children:"\u67e5\u770b\u8be6\u60c5"})})]})]})};w.defaultProps={level:"low"};const O=()=>{const{global:t,setGlobal:e}=(0,r.useGlobalContext)("notification"),n=(0,h.useRef)(),{apis:i,ajax:o}=(0,r.usePreset)(),[d,_]=(0,h.useState)(32);(0,h.useEffect)((()=>{var t;n.current&&_(null===(t=n.current)||void 0===t?void 0:t.clientHeight)}),[]);const{list:m,expand:x}=Object.assign({},{expand:!1,list:[]},t),f=(0,h.useMemo)((()=>{const t=v()(m,(t=>t.level||"low"));return N.map((e=>t[e]||[]))}),[m]);return 0===m.length?null:(0,k.jsxs)("div",{className:u.notification,style:{"--head-option-height":"".concat(d,"px")},children:[(0,k.jsx)("div",{ref:n,children:(0,k.jsxs)(l.Row,{justify:"end",wrap:!1,className:u.header,gutter:8,children:[f.some((t=>t.length>1))&&(0,k.jsx)(l.Col,{children:(0,k.jsx)(l.Button,{size:"small",onClick:()=>{e(Object.assign({},t,{expand:!x}))},children:x?"\u5168\u90e8\u6298\u53e0":"\u5168\u90e8\u5c55\u5f00"})}),(0,k.jsx)(l.Col,{children:(0,k.jsx)(y.default,{type:"primary",size:"small",onClick:async()=>{var n;const{data:l}=null!==i&&void 0!==i&&null!==(n=i.notification)&&void 0!==n&&n.read?await o(Object.assign({},i.notification.read,{data:{ids:m.map((t=>t.id)).filter((t=>!!t))}})):{data:{code:0}};0===l.code&&e(Object.assign({},t,{list:[]}))},children:"\u5168\u90e8\u6e05\u9664"})})]})}),(0,k.jsx)(c.A,{className:u.list,children:(0,k.jsx)(s(),{leaveReverse:!0,duration:200,interval:20,children:f.filter((t=>t&&t.length>0)).map(((t,e)=>{var n;if(x)return t.map(((n,l)=>{var i;return n&&(0,k.jsx)("div",{children:(0,k.jsx)(w,{...Object.assign({},n),className:a()({[u["is-last-item"]]:+e+1===Math.min(null===(i=f.filter((t=>t&&t.length)))||void 0===i?void 0:i.length,3)&&l===(null===t||void 0===t?void 0:t.length)-1})})},"group-".concat(e,"-").concat(l))}));const l=p()(t);return(0,k.jsx)("div",{children:(0,k.jsx)(w,{...Object.assign({},l),groupLength:t.length,className:a()({[u["is-last-item"]]:(null===f||void 0===f?void 0:f.length)&&+e+1===Math.min(null===(n=f.filter((t=>t&&t.length)))||void 0===n?void 0:n.length,3)})})},"group-".concat(e,"-0"))}))})})]})}},94710:t=>{t.exports=function(t,e,n,l){for(var i=-1,s=null==t?0:t.length;++i<s;){var o=t[i];e(l,o,n(o),t)}return l}},32952:(t,e,n)=>{var l=n(45652);t.exports=function(t,e,n,i){return l(t,(function(t,l,s){e(i,t,n(t),s)})),i}},45652:(t,e,n)=>{var l=n(94664),i=n(76516)(l);t.exports=i},75816:t=>{t.exports=function(t,e,n,l){for(var i=t.length,s=n+(l?1:-1);l?s--:++s<i;)if(e(t[s],s,t))return s;return-1}},19449:(t,e,n)=>{var l=n(94710),i=n(32952),s=n(9096),o=n(54052);t.exports=function(t,e){return function(n,a){var c=o(n)?l:i,r=e?e():{};return c(n,t,s(a,2),r)}}},76516:(t,e,n)=>{var l=n(6571);t.exports=function(t,e){return function(n,i){if(null==n)return n;if(!l(n))return t(n,i);for(var s=n.length,o=e?s:-1,a=Object(n);(e?o--:++o<s)&&!1!==i(a[o],o,a););return n}}},32520:(t,e,n)=>{var l=n(75816),i=n(9096),s=n(76759),o=Math.max;t.exports=function(t,e,n){var a=null==t?0:t.length;if(!a)return-1;var c=null==n?0:s(n);return c<0&&(c=o(a+c,0)),l(t,i(e,3),c)}},85855:(t,e,n)=>{t.exports=n(96483)},39835:(t,e,n)=>{var l=n(71775),i=n(19449),s=Object.prototype.hasOwnProperty,o=i((function(t,e,n){s.call(t,n)?t[n].push(e):l(t,n,[e])}));t.exports=o},96483:t=>{t.exports=function(t){return t&&t.length?t[0]:void 0}},76759:(t,e,n)=>{var l=n(37303);t.exports=function(t){var e=l(t),n=e%1;return e===e?n?e-n:e:0}},46733:()=>{}}]);
//# sourceMappingURL=2503.e749e723.chunk.js.map